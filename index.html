<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-RESTful用法及与SOAP webserver比较" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/27/RESTful用法及与SOAP webserver比较/" class="article-date">
  <time datetime="2019-04-27T10:25:10.000Z" itemprop="datePublished">2019-04-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/27/RESTful用法及与SOAP webserver比较/">RESTful用法及与SOAP webserver比较</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目录：</p>
<p>一、对RESTful的理解</p>
<p>二、RESTful的使用方法</p>
<p>三、URL、URI的区别</p>
<p>四、REST与RESTful的关系与区别</p>
<p>五、RESTful与SOAP的粗略比较（webservice）</p>
<p>参考资料：</p>
<blockquote>
<p>理解RESTful架构 – 阮一峰  <a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/09/restful.html</a><br>RESTful API 最佳实践  – 阮一峰  <a href="http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html</a><br>RESTful架构详解 – 菜鸟教程  <a href="https://www.runoob.com/w3cnote/restful-architecture.html" target="_blank" rel="noopener">https://www.runoob.com/w3cnote/restful-architecture.html</a>  </p>
</blockquote>
<p>整理笔记（以下主要是参考阮一峰的文章，菜鸟教程的也非常值得看）：</p>
<p>​        RESTful是目前很流行的API设计规范，用于web数据接口的设计，尤其在前端nodejs工具的express框架中发挥了极大的作用。它首次出现在2000年Roy Fielding（此人很牛，划重点；REST的概念就是他提出来的，REST与RESTful的区别在后文）的博士论文中。</p>
<h4 id="一、对RESTful的理解："><a href="#一、对RESTful的理解：" class="headerlink" title="一、对RESTful的理解："></a>一、对RESTful的理解：</h4><p>​        REST =》 Representational State Transfer，阮一峰大大的翻译是“表现层状态转化”，且认为少了一个主语：Resources（资源）。如果一个架构符合REST原则，就成为RESTful架构。下面从每个词的含义来理解整个规则。</p>
<p>​       Resources 所谓”资源”，就是网络上的一个实体，或者说是网络上的一个具体信息。它可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的实在。你可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的URI。要获取这个资源，访问它的URI就可以，因此URI就成了每一个资源的地址或独一无二的识别符。而所谓”上网”，就是与互联网上一系列的”资源”互动，调用它的URI。</p>
<p>​       Representational： “资源”是一种信息实体URI，外在表现形式很多，而这个呈现出来的形式，就叫做它的“表现层”。严格地说，有些网址最后的”.html”后缀名是不必要的，因为这个后缀名表示格式，属于”表现层”范畴，而URI应该只代表”资源”的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对”表现层”的描述。</p>
<p>​       State Tranfer：在客户端与服务端互动的过程中，一定涉及到数据和状态的变化。而互联网通信协议http协议，是一个无状态协议。这意味着，所有状态保存在服务器端，如果客户端想要操作服务器，必须通过一定的方式，让服务器存储的状态发生转化。而这种转化是建立在表现层之上的，所以就是“表现层状态转化”。<strong>而客户端用到的手段，只能是HTTP协议</strong>。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。</p>
<p>​        所以，RESTful架构就是：(1)每个URI代表一种资源(2)客户端与服务端之间，传递这种资源的某种表现层(3)客户端通过四个http动词，对服务器端资源进行操作，实现“表现层状态转化”。</p>
<p>​        RESTful架构有一些典型的设计误区：</p>
<p>​        (1)URI包含动词：“资源”实体是名词，URI不应该有动词，动词应放在http协议中；</p>
<p>​        POST /accounts/1/transfer/500/to/2</p>
<p>​        POST /transaction HTTP/1.1</p>
<p>　　 Host: 127.0.0.1</p>
<p>　　 from=1&amp;to=2&amp;amount=500.00</p>
<p>​        (2)在URI中加版本号：  因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。版本号可以在HTTP请求头信息的Accept字段中进行区分。</p>
<p>​        <a href="http://www.example.com/app/1.0/foo" target="_blank" rel="noopener">http://www.example.com/app/1.0/foo</a></p>
<p>​        Accept: vnd.example-com.foo+json; version=1.0</p>
<p>补充知识：URI与URL的区别：  在底部。</p>
<h4 id="二、RESTful的使用方法："><a href="#二、RESTful的使用方法：" class="headerlink" title="二、RESTful的使用方法："></a>二、RESTful的使用方法：</h4><p>1、URL设计：“动词” + “宾语”</p>
<p>​        其中，动词指的是HTTP的五种方法，对应CRUD操作（HTTP规范，动词一律应该大写）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET：读取（Read）</span><br><span class="line">POST：新建（Create）</span><br><span class="line">PUT：更新（Update）</span><br><span class="line">PATCH：更新（Update），通常是部分更新</span><br><span class="line">DELETE：删除（Delete）</span><br><span class="line"></span><br><span class="line">    POST和PUT在创建资源的区别在于，所创建的资源的名称(URI)是否由客户端决定。 例如为我的博文增加一个java的分类，生成的路径就是分类名/categories/java，那么就可以采用PUT方法。</span><br><span class="line">    统一接口并不阻止你扩展方法，只要方法对资源的操作有着具体的、可识别的语义即可，并能够保持整个接口的统一性。</span><br><span class="line">    需要注意的是，像PATCH这种不是HTTP标准方法的，服务端需要考虑客户端是否能够支持的问题。</span><br><span class="line">    即使你按各个动词的原本意图来使用它们，你仍可以轻易禁止缓存机制。 最简单的做法就是在你的HTTP响应里增加这样一个报头： Cache-control: no-cache。 但是，同时你也对失去了高效的缓存与再验证的支持(使用Etag等机制)。</span><br><span class="line"></span><br><span class="line">对于客户端来说，在为一个REST式服务实现程序客户端时，也应该充分利用现有的缓存机制，以免每次都重新获取表示。</span><br></pre></td></tr></table></figure>
<p>​        而客户端只能使用GET及POST方法，服务器接收其他三种方法的时候，必须接受POST来模拟。模拟需借助“X-HTTP-Method-Override”属性，该属性的值即为要覆盖POST的方法：</p>
<blockquote>
<p>​    POST /api/Person/4 HTTP/1.1  </p>
<p>​    X-HTTP-Method-Override: PUT</p>
</blockquote>
<p>​        其中，宾语必须是名词。而名词的形式一般建议采取复数，因为常见的操作是读取一个集合。</p>
<p>​        除此之外，常见的情况，资源多级分类，但建议将多级URL转为“一级+参数”的形式。（“/”用来表示层级；“？”过滤资源；“_”或“-”URI可读性更好；“,”或“；”可以用来表示同级资源的关系）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /authors/12/categories/2    =》   GET /authors/12?categories=2</span><br><span class="line">GET /articles/published         =》   GET /articles?published=true</span><br></pre></td></tr></table></figure>
<p>​        由于有时候不可能将所有信息返回提取显示，所以提供了过滤信息这一方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">?limit=10：指定返回记录的数量</span><br><span class="line">?offset=10：指定返回记录的开始位置。</span><br><span class="line">?page_number=2&amp;page_size=100：指定第几页，以及每页的记录数。</span><br><span class="line">?sortby=name&amp;order=asc：指定返回结果按照哪个属性排序，以及排序顺序。</span><br><span class="line">?animal_type_id=1：指定筛选条件</span><br><span class="line">参数的设计允许存在冗余，即允许API路径和URL参数偶尔有重复。比如，</span><br><span class="line">GET /zoo/ID/animals 与 GET /animals?zoo_id=ID 的含义是相同的。</span><br></pre></td></tr></table></figure>
<p>2、状态码：客户端的每一次请求，服务器都必须给出回应。包括HTTP状态码 + 数据。分为五个类别：1XX：相关信息；2XX：操作成功；3XX：重定向；4XX：客户端错误；5XX：服务器错误。约么100多种，为的就是精确，涵盖尽可能多的情况。API一般不需要1XX，重点介绍其他四种。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 2XX：</span><br><span class="line">GET: 200 OK</span><br><span class="line">POST: 201 Created    生成了新资源</span><br><span class="line">PUT: 200 OK</span><br><span class="line">PATCH: 200 OK</span><br><span class="line">DELETE: 204 No Content  资源已经不存在</span><br><span class="line">202 Accepted状态码表示服务器已经收到请求，但还未进行处理，会在未来再处理，通常用于异步操作。</span><br><span class="line"></span><br><span class="line">// 3XX:</span><br><span class="line">   API 用不到301状态码（永久重定向）和302状态码（暂时重定向，307也是这个含义），因为它们可以由应用级别返回，浏览器会直接跳转，API 级别可以不考虑这两种情况。</span><br><span class="line">    API 用到的3xx状态码，主要是303 See Other，表示参考另一个 URL。它与302和307的含义一样，也是&quot;暂时重定向&quot;，区别在于302和307用于GET请求，而303用于POST、PUT和DELETE请求。收到303以后，浏览器不会自动跳转，而会让用户自己决定下一步怎么办。</span><br><span class="line">// 4xx：</span><br><span class="line">400 Bad Request：服务器不理解客户端的请求，未做任何处理。</span><br><span class="line">401 Unauthorized：用户未提供身份验证凭据，或者没有通过身份验证。</span><br><span class="line">403 Forbidden：用户通过了身份验证，但是不具有访问资源所需的权限。</span><br><span class="line">404 Not Found：所请求的资源不存在，或不可用。</span><br><span class="line">405 Method Not Allowed：用户已经通过身份验证，但是所用的 HTTP 方法不在他的权限之内。</span><br><span class="line">410 Gone：所请求的资源已从这个地址转移，不再可用。</span><br><span class="line">415 Unsupported Media Type：客户端要求的返回格式不支持。比如，API 只能返回 JSON 格式，但是客户端要求返回 XML 格式。</span><br><span class="line">422 Unprocessable Entity ：客户端上传的附件无法处理，导致请求失败。</span><br><span class="line">429 Too Many Requests：客户端的请求次数超过限额。</span><br><span class="line">// 5XX:</span><br><span class="line">5xx状态码表示服务端错误。一般来说，API 不会向用户透露服务器的详细信息，所以只要两个状态码就够了。</span><br><span class="line">500 Internal Server Error：客户端请求有效，服务器处理时发生了意外。</span><br><span class="line">503 Service Unavailable：服务器无法处理请求，一般用于网站维护状态。</span><br></pre></td></tr></table></figure>
<p>3、服务器回应：</p>
<p>​        现下开发模式基本上采取前后端分离，返回一个json对象便于操作数据，因此，服务器回应的HTTP头的Content-Type属性要设为“application/json”；客户端也要明确设置ACCEPT属性值为“application/json”。</p>
<p>​        发生错误时，一定不要返回200。有的开发者会在200之后添加错误码code及msg信息，用来区分。但是此种控制下不建议采取该方式。</p>
<p>​        API 的使用者未必知道，URL 是怎么设计的。一个解决方法就是，在回应中，给出相关链接，便于下一步操作。这样的话，用户只要记住一个 URL，就可以发现其他的 URL。这种方法叫做 HATEOAS。HATEOAS 的格式没有统一规定，上面例子中，GitHub 将它们与其他属性放在一起。更好的做法应该是，将相关链接与其他属性分开。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;feeds_url&quot;: &quot;https://api.github.com/feeds&quot;,</span><br><span class="line">  &quot;followers_url&quot;: &quot;https://api.github.com/user/followers&quot;,</span><br><span class="line">  &quot;following_url&quot;: &quot;https://api.github.com/user/following&#123;/target&#125;&quot;,</span><br><span class="line">  &quot;gists_url&quot;: &quot;https://api.github.com/gists&#123;/gist_id&#125;&quot;,</span><br><span class="line">  &quot;hub_url&quot;: &quot;https://api.github.com/hub&quot;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line">  vs</span><br><span class="line">  </span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Content-Type: application/json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;status&quot;: &quot;In progress&quot;,</span><br><span class="line">   &quot;links&quot;: &#123;[</span><br><span class="line">    &#123; &quot;rel&quot;:&quot;cancel&quot;, &quot;method&quot;: &quot;delete&quot;, &quot;href&quot;:&quot;/api/status/12345&quot; &#125; ,</span><br><span class="line">    &#123; &quot;rel&quot;:&quot;edit&quot;, &quot;method&quot;: &quot;put&quot;, &quot;href&quot;:&quot;/api/status/12345&quot; &#125;</span><br><span class="line">  ]&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="三、URL、URI的区别："><a href="#三、URL、URI的区别：" class="headerlink" title="三、URL、URI的区别："></a>三、URL、URI的区别：</h4><p>URL：(Uniform/Universal Resource Locator 的缩写，统一资源定位符)。</p>
<p>URI：(Uniform Resource Identifier 的缩写，统一资源标识符)（代表一种标准）。</p>
<p><img src="http://39.106.9.2/blogImg/2019-04-27url_uri.png" alt="img"></p>
<ul>
<li>URI – 统一资源标识符</li>
</ul>
<p>URI是使用一小串数字、字母和符号来识别文档的标准。它是在RFC 3986定义的：URI指的是通用句法。所有的URL、URN及URC都是URI。</p>
<ul>
<li>URL – 统一资源定位符</li>
</ul>
<p>URL中包含了如何通过其位置来获取资源的信息。例如：<br><a href="http://example.com/mypage.html" target="_blank" rel="noopener">http://example.com/mypage.html</a><br><a href="ftp://example.com/download.zip" target="_blank" rel="noopener">ftp://example.com/download.zip</a><br>mailto:<a href="mailto:user@example.com" target="_blank" rel="noopener">user@example.com</a><br>file:///home/user/file.txt<br>tel:1-888-555-5555<br><a href="http://example.com/resource?foo=bar#fragment" target="_blank" rel="noopener">http://example.com/resource?foo=bar#fragment</a><br>/other/link.html (一个相对URL，只有在另外一个完整的URL上下文中才有用)</p>
<p>URL总是以一个协议头开始，通常包括诸如主机名(example.com)和一个文件路径(/foo/mypage.html)。URL可能也会有查询参数及片段识别符。</p>
<ul>
<li>URN – 统一资源名称</li>
</ul>
<p>URN通过一个唯一及持续的名字来标识资源，但却不必告诉你如何在网络上定位到它。它通常是以一个urn前缀的开头的。例如：<br>urn:isbn:0451450523 to identify a book by its ISBN number.<br>urn:uuid:6e8bc430-9c3a-11d9-9669-0800200c9a66 a globally unique identifier<br>urn:publishing:book - An XML namespace that identifies the document as a type of book.</p>
<p>URN可以识别想法和概念。他们并不限于识别文件。当一个URN代表一个文件时，它可以被一个解析器转换成一条URL。然后这个文件就这个用转换后的URL下载了。</p>
<ul>
<li>URC – 统一资源引用符</li>
</ul>
<p>URC指的是一个文件的元数据，而不是文件本身。URC的一个例子是一个指定HTML网页的源代码，如：view-source:<a href="http://example.com/" target="_blank" rel="noopener">http://example.com/</a></p>
<ul>
<li>Data URI</li>
</ul>
<p>我们可以直接将数据放到一个URI中，而不是在互联网上定位或命名它。一个数据URI：data:,Hello%20World。</p>
<p>来源： <a href="https://blog.51cto.com/xoyabc/1905492" target="_blank" rel="noopener">https://blog.51cto.com/xoyabc/1905492</a></p>
<p>知乎高赞回答地址：<a href="https://www.zhihu.com/question/21950864" target="_blank" rel="noopener">https://www.zhihu.com/question/21950864</a> </p>
<h4 id="四、REST与RESTful的关系与区别"><a href="#四、REST与RESTful的关系与区别" class="headerlink" title="四、REST与RESTful的关系与区别"></a>四、REST与RESTful的关系与区别</h4><p>RESTful是由REST派生出来的。</p>
<p>REST：Representational State Transfer      表述性状态转移,是一种架构风格。<br>REST原则：<br>（1）、网络上的所有事物都被抽象为资源<br>（2）、每个资源都有一个唯一的资源标识符<br>（3）、 同一个资源具有多种表现形式(xml,json等)<br>（4）、 对资源的各种操作不会改变资源标识符<br>（5）、所有的操作都是无状态的</p>
<p>RESTful: 遵守了REST原则 的web服务<br>理解：RESTful与REST相比，多了一个ful,就英语层面来说是一个形容词，RESTful翻译为中文为： “REST式的”<br>是REST式的什么呢？答案是REST式的应用，REST风格的web服务也是REST式的应用，REST式的web服务是一种ROA(The Resource-Oriented Architecture)(面向资源的架构)</p>
<h4 id="五、RESTful与SOAP的粗略比较（webservice）"><a href="#五、RESTful与SOAP的粗略比较（webservice）" class="headerlink" title="五、RESTful与SOAP的粗略比较（webservice）"></a>五、RESTful与SOAP的粗略比较（webservice）</h4><p>首先需要了解：REST是一种架构风格，其核心是面向资源；而webService底层SOAP协议，主要核心是面向活动；</p>
<p>WebService 是一种跨编程语言和跨操作系统平台的远程调用技术。其通过HTTP协议发送请求和接收结果时采用XML格式封装，并增加了一些特定的HTTP消息头，这些特定的HTTP消息头和XML内容格式就是SOAP协议。</p>
<p><strong>对比</strong></p>
<p>效率与易用性：SOAP由于各种需求不断扩充其本身协议的内容，导致在SOAP处理方面的性能有所下降。同时在易用性方面以及学习成本上也有所增加。而RESTful API 在请求方法、资源、地址都进行了规范，其最大限度的利用了HTTP最初的应用协议的设计理念。</p>
<p>安全性：RESTful 对于资源型服务器接口比较适合，适合对于效率要求很高，但是对于安全要求不高的场景。SOAP 的成熟性可以给需要提供给多开发语言的，对于安全性的要求较高的接口设计带来便利，你可以在客户端和服务端应用证书进行安全措施。所以关键看应用场景。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/27/RESTful用法及与SOAP webserver比较/" data-id="cjuzd8ncx00006ot6l4wqgwl1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/restful、rest、url与uri、soap与restful/">restful、rest、url与uri、soap与restful</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-让文本框自动适应内容的高度 &amp; 让文本框显示折叠、收放" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/17/让文本框自动适应内容的高度 & 让文本框显示折叠、收放/" class="article-date">
  <time datetime="2019-04-17T12:31:54.000Z" itemprop="datePublished">2019-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/17/让文本框自动适应内容的高度 & 让文本框显示折叠、收放/">让文本框自动适应内容的高度 &amp; 让文本框显示折叠、收放</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="让文本框自动适应内容的高度-amp-让文本框显示折叠、收放"><a href="#让文本框自动适应内容的高度-amp-让文本框显示折叠、收放" class="headerlink" title="让文本框自动适应内容的高度 &amp; 让文本框显示折叠、收放"></a>让文本框自动适应内容的高度 &amp; 让文本框显示折叠、收放</h3><p>来新的样式需求：要实现下图的效果，点击折叠/收回；</p>
<p><img src="http://39.106.9.2/blogImg/2019-04-17textarea.png#pic_center" alt="textarea展开折叠"></p>
<p>发现textarea对象有个属性scrollHeight，表示滑动高度；按照与文本框样式的高度之间的关系，就可以解决上述两个问题。</p>
<h4 id="一、让文本框实现上图折叠-缩回"><a href="#一、让文本框实现上图折叠-缩回" class="headerlink" title="一、让文本框实现上图折叠/缩回"></a>一、让文本框实现上图折叠/缩回</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;note-textarea&quot;&gt;</span><br><span class="line">    &lt;textarea name=&quot;&quot; id=&quot;resizeText&quot; &gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;div class=&quot;note-open&quot; onclick=&quot;openCloseText()&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">// 样式请根据自己实际进行调整</span><br><span class="line"> .note-text &#123;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">        color: #333;</span><br><span class="line">        margin-bottom: 5px;</span><br><span class="line">    &#125;</span><br><span class="line">    .note-textarea &#123;</span><br><span class="line">        width: 98%;</span><br><span class="line">        /* height: 120px; */</span><br><span class="line">        border: 1px solid #f2f2f2;</span><br><span class="line">        border-radius: 10px 10px 10px 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    .note-textarea textarea&#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 80px;</span><br><span class="line">        border-radius: 10px 10px 10px 10px;</span><br><span class="line">        border: 1px solid #fff;</span><br><span class="line">        overflow:scroll;</span><br><span class="line">        overflow-y:hidden;</span><br><span class="line">        overflow-x:hidden;</span><br><span class="line">    &#125;</span><br><span class="line">    .note-open &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 20px;   </span><br><span class="line">        background:#eaeaea url(&apos;../../static/img/icon_up_down.png&apos;) no-repeat center center;</span><br><span class="line">        /* background-color: #eaeaea; */</span><br><span class="line">        border-radius: 0px 0px 10px 10px;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">// 记得引入jQuery</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var opentextShow = false;  //全局变量</span><br><span class="line">openCloseText () &#123;</span><br><span class="line">	opentextShow = !opentextShow;</span><br><span class="line">    if(opentextShow) &#123;</span><br><span class="line">        $(&quot;#resizeText&quot;).height($(&quot;#resizeText&quot;)[0].scrollHeight);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        $(&quot;#resizeText&quot;).height(&quot;80px&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="二、让文本框自动使用内容的高度"><a href="#二、让文本框自动使用内容的高度" class="headerlink" title="二、让文本框自动使用内容的高度"></a>二、让文本框自动使用内容的高度</h4><p>摘自：<a href="https://xp9802.iteye.com/blog/2102441" target="_blank" rel="noopener">https://xp9802.iteye.com/blog/2102441</a> </p>
<p>此篇文档写的已经很详细，明显了，为了保存下来作为自己的收藏，下面将展示复制文本。</p>
<h5 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a>方法一：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;textarea rows=1 cols=40 style=&apos;overflow:scroll;overflow-y:hidden;;overflow-x:hidden&apos; </span><br><span class="line">onfocus=&quot;window.activeobj=this;this.clock=setInterval(function()&#123;activeobj.style.height=activeobj.scrollHeight+&apos;px&apos;;&#125;,200);&quot; onblur=&quot;clearInterval(this.clock);&quot;&gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>
<h5 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">var agt = navigator.userAgent.toLowerCase();</span><br><span class="line">var is_op = (agt.indexOf(&quot;opera&quot;) != -1);</span><br><span class="line">var is_ie = (agt.indexOf(&quot;msie&quot;) != -1) &amp;&amp; document.all &amp;&amp; !is_op;</span><br><span class="line">function ResizeTextarea(a,row)&#123;</span><br><span class="line">    if(!a)&#123;return&#125;</span><br><span class="line">    if(!row)</span><br><span class="line">        row=5;</span><br><span class="line">    var b=a.value.split(&quot;\n&quot;);</span><br><span class="line">    var c=is_ie?1:0;</span><br><span class="line">    c+=b.length;</span><br><span class="line">    var d=a.cols;</span><br><span class="line">    if(d&lt;=20)&#123;d=40&#125;</span><br><span class="line">    for(var e=0;e&lt;b.length;e++)&#123;</span><br><span class="line">        if(b[e].length&gt;=d)&#123;</span><br><span class="line">            c+=Math.ceil(b[e].length/d)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    c=Math.max(c,row);</span><br><span class="line">    if(c!=a.rows)&#123;</span><br><span class="line">        a.rows=c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;textarea style=&quot;overflow: hidden;  font-family: Verdana,Arial; font-style: normal;  font-size: 13px; line-height: normal; &quot; rows=&quot;4&quot; cols=&quot;30&quot; onfocus=&quot;javascript:ResizeTextarea(this,4);&quot; onclick=&quot;javascript:ResizeTextarea(this,4);&quot; onkeyup=&quot;javascript:ResizeTextarea(this,4);&quot;&gt;&lt;/textarea&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/17/让文本框自动适应内容的高度 & 让文本框显示折叠、收放/" data-id="cjuzd8nez000s6ot6jxdqo7uw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/textarea自动缩放/">textarea自动缩放</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iphone6的750x1334分辨率排版开发APP及小程序的原因" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/17/iphone6的750x1334分辨率排版开发APP及小程序的原因/" class="article-date">
  <time datetime="2019-04-17T12:01:52.000Z" itemprop="datePublished">2019-04-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/17/iphone6的750x1334分辨率排版开发APP及小程序的原因/">iphone6的750x1334分辨率排版开发APP及小程序的原因</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="iphone6的750x1334分辨率排版开发APP及小程序的原因"><a href="#iphone6的750x1334分辨率排版开发APP及小程序的原因" class="headerlink" title="iphone6的750x1334分辨率排版开发APP及小程序的原因"></a>iphone6的750x1334分辨率排版开发APP及小程序的原因</h3><p>​    小程序与APP都是移动设备上的开发，思路一致。而开发的时候，从设计图开始：750px是设计师一般采取的尺寸，然后再自己做适配。本文主要是根据小程序适配来写的：</p>
<p>​    pt是逻辑分辨率，pt的大小与屏幕尺寸有关系，简单可以理解为长度和视觉单位；px物理单位，像素点，不是长度的相关单位，与屏幕尺寸没有关系。  如下表格：</p>
<table>
<thead>
<tr>
<th style="text-align:center">设备</th>
<th style="text-align:center">屏幕尺寸</th>
<th style="text-align:center">分辨率(pt)</th>
<th style="text-align:center">Reader</th>
<th style="text-align:center">分辨率(px)</th>
<th style="text-align:center">渲染后</th>
<th style="text-align:center">PPI(DPI)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">iPhone 3GS</td>
<td style="text-align:center">3.5寸</td>
<td style="text-align:center">320x480</td>
<td style="text-align:center">@1x</td>
<td style="text-align:center">320x480</td>
<td style="text-align:center">空</td>
<td style="text-align:center">163</td>
</tr>
<tr>
<td style="text-align:center">iPhone 4/4S</td>
<td style="text-align:center">3.5寸</td>
<td style="text-align:center">320x480</td>
<td style="text-align:center">@2x</td>
<td style="text-align:center">640x960</td>
<td style="text-align:center">空</td>
<td style="text-align:center">326</td>
</tr>
<tr>
<td style="text-align:center">iPhone 5/5S/5C</td>
<td style="text-align:center">4.0寸</td>
<td style="text-align:center">320x568</td>
<td style="text-align:center">@2x</td>
<td style="text-align:center">640x1136</td>
<td style="text-align:center">空</td>
<td style="text-align:center">326</td>
</tr>
<tr>
<td style="text-align:center">iPhone 6/6S</td>
<td style="text-align:center">4.7寸</td>
<td style="text-align:center">375x667</td>
<td style="text-align:center">@2x</td>
<td style="text-align:center">750x1334</td>
<td style="text-align:center">空</td>
<td style="text-align:center">326</td>
</tr>
<tr>
<td style="text-align:center">iPhone 6/6S Plus</td>
<td style="text-align:center">5.5寸</td>
<td style="text-align:center">414x736</td>
<td style="text-align:center">@3x</td>
<td style="text-align:center">1242x2208</td>
<td style="text-align:center">1080x1920</td>
<td style="text-align:center">401</td>
</tr>
</tbody>
</table>
<p>​    Reader ：一个pt包含几个px；iPhone6下是 1pt = 2px  。</p>
<p>​    PPI表示每一寸包含多少个像素点，对角线勾股定理 （）/3.5寸。  而DPI打印机喷墨点数，这个PPI就是有DPI引申来的概念。</p>
<p>​    rpx小程序自适应。但是不是所有的地方的单位都适合用rpx。</p>
<h5 id="如何做不同分辨率设备的自适应？"><a href="#如何做不同分辨率设备的自适应？" class="headerlink" title="如何做不同分辨率设备的自适应？"></a>如何做不同分辨率设备的自适应？</h5><ol>
<li><p>以ip6的物理像素750x1334为视觉稿进行设计，而在小程序中使用rpx为单位；</p>
</li>
<li><p>ip6下的换算单位是1px=1rpx=0.5pt</p>
</li>
<li><p>使用rpx，小程序会自动在不同的分辨率下进行转换，而使用px为单位不会。（但是也要根据实际的设计，比如横向的间距rpx最合适，竖向的间距可以考虑使用px来达到多页面相同的效果）。</p>
</li>
</ol>
<h5 id="为什么使用ip6的物理分辨率来做设计图？"><a href="#为什么使用ip6的物理分辨率来做设计图？" class="headerlink" title="为什么使用ip6的物理分辨率来做设计图？"></a>为什么使用ip6的物理分辨率来做设计图？</h5><h6 id="因为方便换算。ip6下1px-1rpx；而ip6-plus下1px约为0-6rpx；这个跟什么设备无关，也不是谁定的，只是搞好ip6的这个物理分辨率非常好换算。"><a href="#因为方便换算。ip6下1px-1rpx；而ip6-plus下1px约为0-6rpx；这个跟什么设备无关，也不是谁定的，只是搞好ip6的这个物理分辨率非常好换算。" class="headerlink" title="因为方便换算。ip6下1px=1rpx；而ip6 plus下1px约为0.6rpx；这个跟什么设备无关，也不是谁定的，只是搞好ip6的这个物理分辨率非常好换算。"></a>因为方便换算。ip6下1px=1rpx；而ip6 plus下1px约为0.6rpx；这个跟什么设备无关，也不是谁定的，只是搞好ip6的这个物理分辨率非常好换算。</h6>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/17/iphone6的750x1334分辨率排版开发APP及小程序的原因/" data-id="cjuzd8ndz00086ot6zlsxr5hk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/物理分辨率-逻辑分辨率、rpx-px/">物理分辨率&逻辑分辨率、rpx&px</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-svg画数据库物理模型图" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/11/svg画数据库物理模型图/" class="article-date">
  <time datetime="2019-04-11T13:55:10.000Z" itemprop="datePublished">2019-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/svg画数据库物理模型图/">svg画数据库物理模型图</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。"><a href="#突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。" class="headerlink" title="突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。"></a>突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。</h6><p>原文地址：<a href="https://blog.csdn.net/qq_37146850/article/details/75050901" target="_blank" rel="noopener">https://blog.csdn.net/qq_37146850/article/details/75050901</a></p>
<p>GitHub地址： <a href="https://github.com/cpettitt/dagre-d3" target="_blank" rel="noopener">https://github.com/cpettitt/dagre-d3</a></p>
<h6 id="demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3-js、d3v4-js-改文件的原地址找不到了-，此项目的demo可以由此提取："><a href="#demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3-js、d3v4-js-改文件的原地址找不到了-，此项目的demo可以由此提取：" class="headerlink" title="demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3.js、d3v4.js(改文件的原地址找不到了)，此项目的demo可以由此提取："></a>demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3.js、d3v4.js(改文件的原地址找不到了)，此项目的demo可以由此提取：</h6><p>链接：<a href="https://pan.baidu.com/s/1zVY4-tn4Vrf5VDSIQeGUSQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1zVY4-tn4Vrf5VDSIQeGUSQ</a><br>提取码：gyn5 </p>
<p>效果图如下：<br><img src="http://39.106.9.2/blogImg/2019-04-13svg_sqlModel.png#pic_center=200x400&quot;svg 数据库物理模型效果图&quot;" alt="svg 数据库物理模型效果图"></p>
<h6 id="都是前人的经验，就只提供一下效果图及demo文件，自行研究。"><a href="#都是前人的经验，就只提供一下效果图及demo文件，自行研究。" class="headerlink" title="都是前人的经验，就只提供一下效果图及demo文件，自行研究。"></a>都是前人的经验，就只提供一下效果图及demo文件，自行研究。</h6>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/11/svg画数据库物理模型图/" data-id="cjuzd8ne100096ot63sw54mle" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/svg、在HTML中画数据库物理模型图/">svg、在HTML中画数据库物理模型图</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ajax请求本地json文件，谷歌浏览器报跨域错误" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/" class="article-date">
  <time datetime="2019-04-11T12:59:55.000Z" itemprop="datePublished">2019-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/">ajax请求本地json文件，谷歌浏览器报跨域错误</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下："><a href="#前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下：" class="headerlink" title="前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下："></a>前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下：</h5><h6 id="Access-to-XMLHttpRequest-at-‘file-…’-from-origin-‘null’-has-been-blocked-by-CORS-policy-Cross-origin-requests-are-only-supported-for-protocol-schemes-http-data-chrome-chrome-extension-https"><a href="#Access-to-XMLHttpRequest-at-‘file-…’-from-origin-‘null’-has-been-blocked-by-CORS-policy-Cross-origin-requests-are-only-supported-for-protocol-schemes-http-data-chrome-chrome-extension-https" class="headerlink" title="Access to XMLHttpRequest at ‘file:///…’ from origin ‘null’ has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https."></a>Access to XMLHttpRequest at ‘file:///…’ from origin ‘null’ has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https.</h6><h6 id="意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。"><a href="#意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。" class="headerlink" title="意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。"></a>意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。</h6><h6 id="经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。"><a href="#经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。" class="headerlink" title="经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。"></a>经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。</h6><h4 id="解决谷歌浏览器需要请求本地json文件："><a href="#解决谷歌浏览器需要请求本地json文件：" class="headerlink" title="解决谷歌浏览器需要请求本地json文件："></a>解决谷歌浏览器需要请求本地json文件：</h4><p>1、jsonp（jsonp请求本地与请求其他服务器有不一样的用法）</p>
<p>2、项目中使用nginx反向代理（自行了解，nginx是个不错的代理服务器）</p>
<p>3、在webstorm中打开（webstorm中自带了一个本地服务器，会在浏览器中开一个端口）</p>
<p>4、修改谷歌浏览器的配置（不知怎么修改，且不实用）</p>
<h6 id="综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。"><a href="#综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。" class="headerlink" title="综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。"></a>综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。</h6><h3 id="jsonp请求json文件方法："><a href="#jsonp请求json文件方法：" class="headerlink" title="jsonp请求json文件方法："></a>jsonp请求json文件方法：</h3><h5 id="1、jsonp请求本地json文件"><a href="#1、jsonp请求本地json文件" class="headerlink" title="1、jsonp请求本地json文件"></a>1、jsonp请求本地json文件</h5><h6 id="不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src-jsonp方式”，具体用法如下："><a href="#不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src-jsonp方式”，具体用法如下：" class="headerlink" title="不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src + jsonp方式”，具体用法如下："></a>不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src + jsonp方式”，具体用法如下：</h6><p>json文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">callbackFun（&#123;</span><br><span class="line">    &quot;data&quot;: [&#123;</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;name&quot;: &quot;z&quot;</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;m&quot;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;）</span><br><span class="line">// 此处的callbackFun与下面的函数名对应</span><br></pre></td></tr></table></figure>
<p>html页面中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">	function callbackFun (data) &#123;</span><br><span class="line">        console.log(data);</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;./data.json?callback=callbackFuc&quot;&gt;&lt;/script&gt;</span><br><span class="line">// callback代表json的回调函数，callbackFun为回调函数名，及你要进行处理数据的函数名</span><br><span class="line">// callbackFun回调函数必须放在前面</span><br></pre></td></tr></table></figure>
<h5 id="2、jsonp-ajax请求其他服务器文件"><a href="#2、jsonp-ajax请求其他服务器文件" class="headerlink" title="2、jsonp + ajax请求其他服务器文件"></a>2、jsonp + ajax请求其他服务器文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    async : true,</span><br><span class="line">    url : &quot;https://xxx/xx/xx&quot;,</span><br><span class="line">    type : &quot;GET&quot;,</span><br><span class="line">    dataType : &quot;jsonp&quot;, // 返回的数据类型，设置为JSONP方式</span><br><span class="line">    jsonp : &apos;callback&apos;, //指定一个查询参数名称来覆盖默认的 jsonp 回调参数名 callback</span><br><span class="line">    jsonpCallback: &apos;handleResponse&apos;, //设置回调函数名</span><br><span class="line">    data : &#123;&#125;, </span><br><span class="line">    success: function(response, status, xhr)&#123;</span><br><span class="line">        console.log(&apos;状态为：&apos; + status + &apos;,状态是：&apos; + xhr.statusText);</span><br><span class="line">        console.log(response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 也可以通过getJSON</span><br><span class="line">$.getJSON(&quot;https://xxxx?xx=xx&amp;xx=xx&amp;callback=?&quot;, function(data)&#123;</span><br><span class="line">                console.log(data);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/" data-id="cjuzd8nd800016ot6k7r3tnme" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax请求json、谷歌json跨域/">ajax请求json、谷歌json跨域</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue基本知识" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/vue基本知识/" class="article-date">
  <time datetime="2019-03-11T14:27:08.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/vue基本知识/">vue基本知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、指令、</p>
<p>v-if vs v-for</p>
<p>​    当 Vue 处理指令时，v-for 比 v-if 具有更高的优先级，通过v-if 移动到容器元素，不会再重复遍历列表中的每个值。取而代之的是，我们只检查它一次，且不会在 v-if 为否的时候运算 v-for。永远不要把v-if和v-for同时用在同一元素上。</p>
<p>自定义</p>
<p>2、修改引入插件样式</p>
<ul>
<li>vue引用外部插件 发现内部style无法更改插件样式的解决办法（基于scoped添加限制每个页面样式的前提），假设插件引用上一级的样式为’.a’，需要更改控制的样式为’.b’</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、.a   /deep/  .b &#123;&#125;   </span><br><span class="line">2、.a &gt;&gt;&gt; .b &#123;&#125; </span><br><span class="line">3、去掉scoped，转为全局的样式</span><br></pre></td></tr></table></figure>
<p>关于样式的使用，还有以下的建议：</p>
<p>​    在vue中管理样式的时候，不止要使用scoped特性，使用唯一的class名可以帮你确保那些三房库的css不会运用到你自己的HTML上。比如许多工程常用的button、btn、icon等class名，所以添加一个APP专属或组件专属的前缀（比如ButtonClose-icon）也可以提供很多保护。</p>
<p>3、路由跳转页面的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123;path:”/Login”&#125;); 跳转到不同的url，但这个方法回向history栈添加一个记录，点击后退会返回到上一个页面。push中可以设置字符串:&apos;login&apos;，对象:&#123;path: &apos;login&apos;&#125;,命名的路由：&#123;name: &apos;login&apos;, params: &#123;id: 1&#125;&#125;，带查询参数（可转化成/register?a=&apos;aa&apos;）：&#123;path：&apos;register&apos;, query: &#123;a: &apos;aa&apos;&#125;&#125;</span><br><span class="line"></span><br><span class="line">this.$router.replace(&#123;path:”/Login”&#125;); 同样是跳转到指定的url，但是这个方法不会向history里面添加新的记录，点击返回，会跳转到上上一个页面。上一个记录是不存在的。</span><br><span class="line"></span><br><span class="line">this.$router.go(number); 相对于当前页面向前或向后跳转多少个页面,类似 window.history.go(n)。n可为正数可为负数。正数返回上一个页面</span><br></pre></td></tr></table></figure>
<p>4、vue双向绑定原理：</p>
<p>​    vue.js 是采用数据劫持结合发布者-订阅者模式的方式，通过Object.defineProperty()来劫持各个属性的setter，getter，在数据变动时发布消息给订阅者，触发相应的监听回调。</p>
<p>​    vue具有响应式布局，不是媒体查询的响应式布局，而是对数据变化进行响应的布局；组件开发，模块分装成一个个，便于开发；虚拟DOM，在计算完成最终的dom操作之前，使用的都是预处理操作，并没有操作真实的DOM，然后再将DOM操作变化反映到DOM树上。</p>
<p>​    虚拟DOM：“虚拟 DOM”是由 Vue 组件树建立起来的整个 VNode 树的称呼。思想是：对复杂的文档DOM结构，提供一种方便的工具，进行最小化DOM操作。</p>
<p>​    VNode：Vue在 页面上渲染的节点，及其子节点称为“虚拟节点 (Virtual Node)”，简写为“VNode”。</p>
<p>5、webpack</p>
<p>webpack的打包效用：整合所有的素材请求，只进行一次TCP握手和挥手的过程，就把多个资源给下载下来。多个资源共享一个HTTP请求，所以head部分也是共享的，相当于形成了规模效应，让网页展现的更快，用户体验更好。</p>
<p>6、MVVM模式：</p>
<p>​    Model-View-ViewModel；vue是以数据为驱动的，一旦创建dom和数据就保持同步，每当数据发生变化时，dom也会变化。DOMListener和DataBindings是实现双向绑定的关键。DOMListener监听页面所有View层DOM元素的变化，当发生变化，Model的数据随之变化；DataBindings监听Model层的数据，当数据发生变化，View层的DOM元素随之变化。</p>
<p>7、vue生命周期：</p>
<p>​    vue生命周期：Vue实例从创建到销毁的过程；开始创建、初始化数据、编译模板、挂载DOM-&gt;渲染、更新-&gt;渲染、卸载等过程。</p>
<p>​    生命周期有多个钩子函数，可以让我们在整个Vue实例运行过程中养成良好的处理数据逻辑。</p>
<p>​    生命周期总共分为八个阶段：创建前/后，载入前/后，更新前/后，销毁前/后。所以也是很好理解和记忆的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate:</span><br><span class="line">// loading，在加载实例时触发</span><br><span class="line">// 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。</span><br><span class="line">Created:</span><br><span class="line">// 初始化完成的写在卸载这里：如结束loading。</span><br><span class="line">// 实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。</span><br><span class="line">beforeMount:</span><br><span class="line">// 在挂载开始之前被调用：相关的 render 函数首次被调用。</span><br><span class="line">Mounted:</span><br><span class="line">// 挂载元素，获取到DOM节点；第一次加载触发到这一步</span><br><span class="line">beforeUpdate:</span><br><span class="line">// 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。 你可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程。</span><br><span class="line">Updated:</span><br><span class="line">// 如果对数据统一处理，可在这里调用相应函数</span><br><span class="line">//由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态，因为这可能会导致更新无限循环。该钩子在服务器端渲染期间不被调用</span><br><span class="line">beforeDestory:</span><br><span class="line">// 实例销毁之前调用。在这一步，实例仍然完全可用。</span><br><span class="line">Destoryed:</span><br><span class="line">// Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</span><br><span class="line">此处解释有参考：https://www.cnblogs.com/fly_dragon/p/6220273.html</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/vue基本知识/" data-id="cjuzd8ne6000d6ot6y43yw64f" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue基础/">vue基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-easy-ui之dataGrid" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/easy-ui之dataGrid/" class="article-date">
  <time datetime="2019-03-11T14:26:45.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/easy-ui之dataGrid/">easy-ui之dataGrid</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>datagrid学习：</li>
</ul>
<p>(1)datagrid 参数字段 </p>
<p>​        getSelected、getSelections、getEditor、validateRow（验证组）、getRows（获取数组）、endEditer、loaded（完成加载）、beginEdit、cancelEdit、deleteRow、acceptChanges、rejectChanges、getChanges</p>
<p>(2)data-options 属性 可以设置的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">url:</span><br><span class="line"></span><br><span class="line">singSelect:</span><br><span class="line"></span><br><span class="line">toolbar:</span><br><span class="line"></span><br><span class="line">method:</span><br><span class="line"></span><br><span class="line">onClickRow:</span><br><span class="line"></span><br><span class="line">sortable:true/false;</span><br><span class="line"></span><br><span class="line">remoteSort:false/true;</span><br><span class="line"></span><br><span class="line">multiSort:true/false;</span><br><span class="line"></span><br><span class="line">collapsible:true/false;</span><br><span class="line"></span><br><span class="line">rownumbers:true;</span><br><span class="line"></span><br><span class="line">onLoadSuccess:function()&#123;</span><br><span class="line"></span><br><span class="line">    $(this).datagrid(&apos;freezeRow&apos;,0).datagrid(&apos;freezeRow&apos;,1);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">frozen:true/false;  在不需要变化的地方设置frozen=true;</span><br><span class="line"></span><br><span class="line">formatter:  js的function名</span><br><span class="line"></span><br><span class="line">         js的function名：funtion(val,row)&#123;     &#125; ;</span><br><span class="line"></span><br><span class="line">hideColumn -- item.name</span><br><span class="line"></span><br><span class="line">showColumn -- item.name</span><br></pre></td></tr></table></figure>
<p>(3)</p>
<p>var cmenu = $(‘<div>’).appendTo(‘body’);</div></p>
<p>cmenu.menu({ onclick： })</p>
<p>datagrid的format有三个参数（value,rowDatas,rowIndex)，rowDatas是整列的数据，value应该对应着某一列的值，rowIndex应该是某列的排序，</p>
<p>​        </p>
<p>在此列下传参的JavaScript的参数只能是rowIndex，必要情况下可以借由数组来更新。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#aa&quot;).datagrid(&apos;showColumn&apos;,&apos;XXX&apos;); // item.name</span><br><span class="line">$(&quot;#aa&quot;).datagrid(&apos;hideColumn&apos;,&apos;XXX&apos;); //  显示和隐藏，正常的display等的编辑是不起效果的。</span><br></pre></td></tr></table></figure>
<p>不过，也要意识到，当自己解决一个问题时，可以将解决办法以及对应效果进行记录和整理，方便观察失败的原因，对比查漏解决的办法，或许只是自己用错方法了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/easy-ui之dataGrid/" data-id="cjuzd8ndl00046ot6a497m96r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dataGrid、easy-ui/">dataGrid、easy-ui</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ztree树结构总结" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/ztree树结构总结/" class="article-date">
  <time datetime="2019-03-11T14:24:54.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/ztree树结构总结/">ztree树结构总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>ztree学习：<a href="http://www.treejs.cn/v3/api.php" target="_blank" rel="noopener">http://www.treejs.cn/v3/api.php</a></li>
</ul>
<p><strong>// 1 原型$.fn.zTree</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">$.fn.zTree = &#123;</span><br><span class="line">    consts // 常量对象；</span><br><span class="line">    _z // zTree v3.x 内部的全部方法都可以通过 $.fn.zTree._z对象进行调用</span><br><span class="line">    getZTreeObj(treeId) // 根据treeId获取zTreeObj</span><br><span class="line">    destroy(treeId) // 根据treeId销毁tree</span><br><span class="line">    init: function(obj, zSetting, zNodes) &#123; // 初始化方法，返回zTreeObj对象；</span><br><span class="line"> ...</span><br><span class="line"> var zTreeTools = &#123; // 参考API的zTreeObj对象说明，是指API的zTreeObj对象；</span><br><span class="line">  setting : setting, // zTree 对象使用的 setting 配置数据，详细请参考 “setting 配置详解”中的各个属性详细说明</span><br><span class="line">  addNodes : function(parentNode, newNodes, isSilent) &#123; // 添加节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  cancelSelectedNode : function(node) &#123; // 取消节点的选中状态。</span><br><span class="line">   view.cancelPreSelectedNode(setting, node);</span><br><span class="line">  &#125;,</span><br><span class="line">  destroy : function() &#123; // 1、用此方法可以销毁 zTreeObj 代表的 zTree。</span><br><span class="line">     // 2、销毁当前页面全部的 zTree，也可以使用 $.fn.zTree.destroy() 方法。</span><br><span class="line">     // 3、重新使用已经被销毁的树，必须要使用 init 方法进行初始化。</span><br><span class="line">   view.destroy(setting);</span><br><span class="line">  &#125;,</span><br><span class="line">  expandAll : function(expandFlag) &#123; // 展开 / 折叠 全部节点</span><br><span class="line">   expandFlag = !!expandFlag;</span><br><span class="line">   view.expandCollapseSonNode(setting, null, expandFlag, true);</span><br><span class="line">   return expandFlag;</span><br><span class="line">  &#125;,</span><br><span class="line">  expandNode : function(node, expandFlag, sonSign, focus, callbackFlag) &#123; // 展开 / 折叠 指定的节点</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodes : function() &#123; // 获取 zTree 的全部节点数据</span><br><span class="line">   return data.getNodes(setting);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeByParam : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodeByParam(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeByTId : function(tId) &#123; // 根据 zTree 的唯一标识 tId 快速获取节点 JSON 数据对象</span><br><span class="line">   return data.getNodeCache(setting, tId);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByParam : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodesByParam(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByParamFuzzy : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件模糊匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodesByParamFuzzy(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByFilter: function(filter, isSingle, parentNode, invokeParam) &#123; // 根据自定义规则搜索节点数据 JSON 对象集合 或 单个节点数据</span><br><span class="line">   isSingle = !!isSingle;</span><br><span class="line">   if (!filter || (typeof filter != &quot;function&quot;)) return (isSingle ? null : []);</span><br><span class="line">   return data.getNodesByFilter(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), filter, isSingle, invokeParam);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeIndex : function(node) &#123; // 获取某节点在同级节点中的序号（从0开始）</span><br><span class="line">   if (!node) return null;</span><br><span class="line">   var childKey = setting.data.key.children,</span><br><span class="line">   parentNode = (node.parentTId) ? node.getParentNode() : data.getRoot(setting);</span><br><span class="line">   for (var i=0, l = parentNode[childKey].length; i &lt; l; i++) &#123;</span><br><span class="line">    if (parentNode[childKey][i] == node) return i;</span><br><span class="line">   &#125;</span><br><span class="line">   return -1;</span><br><span class="line">  &#125;,</span><br><span class="line">  getSelectedNodes : function() &#123; // 获取 zTree 当前被选中的节点数据集合</span><br><span class="line">   var r = [], list = data.getRoot(setting).curSelectedList;</span><br><span class="line">   for (var i=0, l=list.length; i&lt;l; i++) &#123;</span><br><span class="line">    r.push(list[i]);</span><br><span class="line">   &#125;</span><br><span class="line">   return r;</span><br><span class="line">  &#125;,</span><br><span class="line">  isSelectedNode : function(node) &#123; // 是否选中的节点</span><br><span class="line">   return data.isSelectedNode(setting, node);</span><br><span class="line">  &#125;,</span><br><span class="line">  reAsyncChildNodes : function(parentNode, reloadType, isSilent) &#123; // 强行异步加载父节点的子节点。[setting.async.enable = true 时有效]已经加载过的父节点可反复使用此方法重新加载。请通过 zTree 对象执行此方法。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  refresh : function() &#123; // 刷新 zTree</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  removeChildNodes : function(node) &#123; // 清空某父节点的子节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  removeNode : function(node, callbackFlag) &#123; // 删除节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  selectNode : function(node, addFlag) &#123; // 选中指定节点</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  transformTozTreeNodes : function(simpleNodes) &#123; // 将简单 Array 格式数据转换为 zTree 使用的标准 JSON 嵌套数据格式。</span><br><span class="line">   return data.transformTozTreeFormat(setting, simpleNodes);</span><br><span class="line">  &#125;,</span><br><span class="line">  transformToArray : function(nodes) &#123; // 将 zTree 使用的标准 JSON 嵌套格式的数据转换为简单 Array 格式。(免去用户自行编写递归遍历全部节点的麻烦)</span><br><span class="line">   return data.transformToArrayFormat(setting, nodes);</span><br><span class="line">  &#125;,</span><br><span class="line">  updateNode : function(node, checkTypeFlag) &#123; // 更新某节点数据，主要用于该节点显示属性的更新。</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> root.treeTools = zTreeTools;</span><br><span class="line"> data.setZTreeTools(setting, zTreeTools);</span><br><span class="line"></span><br><span class="line"> if (root[childKey] &amp;&amp; root[childKey].length &gt; 0) &#123;</span><br><span class="line">  view.createNodes(setting, 0, root[childKey]);</span><br><span class="line"> &#125; else if (setting.async.enable &amp;&amp; setting.async.url &amp;&amp; setting.async.url !== &apos;&apos;) &#123;</span><br><span class="line">  view.asyncNode(setting);</span><br><span class="line"> &#125;</span><br><span class="line"> return zTreeTools;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>来源： <a href="http://blog.sina.com.cn/s/blog_667ac0360102ebk9.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_667ac0360102ebk9.html</a></p>
<ul>
<li>ztree新知识点补充：（不用重新刷新的更新节点方式，对象）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、获取zTree对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> treeObj = $.fn.zTree.getZTreeObj(<span class="string">"ztreeDemo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、找到要修改的树的节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> treeNode = treeObj.getNodeByParam(<span class="string">"task_id"</span>,tree_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、为要修改的节点赋值</span></span><br><span class="line"></span><br><span class="line">treeNode.name = tree_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4、修改该节点上的值</span></span><br><span class="line"></span><br><span class="line">treeObj.updateNode(treeNode);</span><br><span class="line"></span><br><span class="line">补充，添加节点：addNodes（如果与等级无关，其实也是不用更新的）；</span><br><span class="line"></span><br><span class="line">addNodes(parentNode,index,newNodes,isSlient);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index：-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//isSlient：设定增加节点后是否自动展开父节点；true不展开；其他值或者缺省状态都自动展开。</span></span><br><span class="line"></span><br><span class="line">removeNode移除（对象）</span><br><span class="line"></span><br><span class="line">treeObj.removeNode(nodes[j]);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/ztree树结构总结/" data-id="cjuzd8nev000p6ot67go8ez8z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ztree、常用特性/">ztree、常用特性</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-canvas画图的使用总结" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/canvas画图的使用总结/" class="article-date">
  <time datetime="2019-03-11T14:15:24.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/canvas画图的使用总结/">canvas画图的使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">var c = $(&quot;#myCanvas&quot;),ctx = c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.clearRect(0,0,mW,mH);</span><br><span class="line">ctx.beginPath(); //起始一条路径，或重置当前路径</span><br><span class="line">ctx.lineWidth = 10;</span><br><span class="line">ctx.stokeStyle = &quot;#000&quot;; </span><br><span class="line">//var gradient = ctx.createLinearGradient(0,0,90,0); //(X0,Y0,X1,Y1)</span><br><span class="line">//gradient.addColorStop(0, #000);</span><br><span class="line">//gradient.addColorStop(1, #fff);</span><br><span class="line">//ctx.stokeStyle = gradient;</span><br><span class="line">//图片填充 pattern</span><br><span class="line">//var img=document.getElementById(&quot;lamp&quot;);</span><br><span class="line">//var pat=ctx.createPattern(img,&quot;repeat&quot;); //repeat|repeat-x|repeat-y|no-repeat</span><br><span class="line">//ctx.stokeStyle = pat;</span><br><span class="line">//放射状、圆形渐变</span><br><span class="line">//var grd=ctx.createRadialGradient(75,50,5,90,60,100);//(x0,y0,r1,x1,y1,r2);渐变开始的圆的坐标及半径</span><br><span class="line">//grd.addColorStop(0,&quot;red&quot;); //规定 gradient 对象中的颜色和位置。 0-1的位置均可以设置</span><br><span class="line">//grd.addColorStop(1,&quot;white&quot;);</span><br><span class="line">//ctx.fillStyle=grd;</span><br><span class="line"></span><br><span class="line">//canvas 路径</span><br><span class="line">//ctx.fill(); 填充当前绘图（路径） ctx.stoke(); 绘制已定义的路径</span><br><span class="line">//ctx.moveTo(); 把路径移动到画布的指定点，不创建线条。  ctx.lineTo();新添加一个点，然后再画布中创建从该点到最后指定点的线条</span><br><span class="line">//ctx.clip();从原始画布中剪切任意形状和尺寸.一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内（不能访问画布上的其他区域）。您也可以在使用 clip() 方法前通过使用 save() 方法对当前画布区域进行保存，并在以后的任意时间对其进行恢复（通过 restore() 方法）。</span><br><span class="line">//ctx.arcTo(150,20,150,70,50); // 创建弧 (X0,Y0,X1,Y1,r);</span><br><span class="line">//ctx.isPointInPath(x,y) 方法返回 true，如果指定的点位于当前路径中；否则返回 false</span><br><span class="line"></span><br><span class="line">//canvas线条样式</span><br><span class="line">//ctx.lineCap=&quot;round&quot;; butt/round/square</span><br><span class="line">//ctx.lineJoin=&quot;round&quot;; //miter/bevel/round</span><br><span class="line">//ctx.lineWidth=10; ctx.miterLimit=5; //折角最大长度</span><br><span class="line"></span><br><span class="line">//canvas矩形</span><br><span class="line">//ctx.rect(0,0,200,200);   ctx.fillRect(0,0,200,200); </span><br><span class="line">//ctx.stokeRect(20,20,150,100); //rect       ctx.clearRect(20,20,100,50); //使其中一部分显示空白</span><br><span class="line"></span><br><span class="line">//canvas文本</span><br><span class="line">//ctx.font=&quot;10px Arial&quot;;</span><br><span class="line">//ctx.textAlign=&quot;start|end|left|right|end&quot;; </span><br><span class="line">//ctx.textBaseline=&quot;alphabetic|top|hanging|middle|ideographic|bottom&quot;;</span><br><span class="line">//measureText() 方法返回包含一个对象，该对象包含以像素计的指定字体宽度。提示：如果您需要在文本向画布输出之前，就了解文本的宽度，那么请使用该方法。var txt=&quot;Hello World&quot; </span><br><span class="line">//ctx.fillText(&quot;width:&quot; + ctx.measureText(txt).width,10,50)</span><br><span class="line">//ctx.strokeText(&quot;Hello World!&quot;,10,50);</span><br><span class="line">//ctx.fillText(&quot;w3school.com.cn&quot;,10,90);</span><br><span class="line"></span><br><span class="line">//canvas drawImage</span><br><span class="line">//ctx.drawImage(img,x,y);</span><br><span class="line">//ctx.drawImage(img,x,y,width,height);</span><br><span class="line">//ctx.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);  剪切,要使用的</span><br><span class="line">//视频使用在画布之上</span><br><span class="line">//var v=document.getElementById(&quot;video1&quot;);</span><br><span class="line">//var c=document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">//ctx=c.getContext(&apos;2d&apos;);</span><br><span class="line">//v.addEventListener(&apos;play&apos;,function() &#123;var i=window.setInterval(function() </span><br><span class="line">//&#123;ctx.drawImage(v,0,0,270,135)&#125;,20);&#125;,false);</span><br><span class="line">//v.addEventListener(&apos;pause&apos;,function() &#123;window.clearInterval(i);&#125;,false);</span><br><span class="line">//v.addEventListener(&apos;ended&apos;,function() &#123;clearInterval(i);&#125;,false);</span><br><span class="line"></span><br><span class="line">//canvas 合成</span><br><span class="line">//ctx.gloabalAlpha = number;  globalAlpha 属性设置或返回绘图的当前透明值（alpha 或 transparency）。介于 0.0（完全透明） 与 1.0（不透明） 之间的数字。</span><br><span class="line">//globalCompositeOperation 属性设置或返回如何将一个源（新的）图像绘制到目标（已有）的图像上。属性值多个</span><br><span class="line">//source-over | source-atop | source-in | source-out | destination-over | destination-atop | destination-in | destination-out | lighter | copy | xor</span><br><span class="line"></span><br><span class="line">//canvas像素</span><br><span class="line">//var imgData=ctx.createImageData(width,height);</span><br><span class="line">//imgData.data[4]=0; imgData.data[5]=255; imgData.data[6]=0; imgData.data[7]=255;  //R\G\B\A</span><br><span class="line">//var imgData=ctx.createImageData(imageData); //与另一个尺寸相同</span><br><span class="line">//var imgData=ctx.getImageData(10,10,50,50); //拷贝</span><br><span class="line">//ctx.putImageData(imgData,10,70); //放置</span><br><span class="line"></span><br><span class="line">// canvas </span><br><span class="line">//ctx.rotate(angle); //旋转角度  ctx.scale(w,h);  放大大小1 = 100%;</span><br><span class="line">//ctx.translate(x,y) 方法重新映射画布上的 (0,0) 位置。后调用诸如 fillRect() 之类的方法时，值会添加到 x 和 y 坐标值上。</span><br><span class="line">//ctx.setTransform();  ctx.transform();</span><br><span class="line"></span><br><span class="line">ctx.arc( r, r, nR, startAngle, endAngle, false);//context.arc(x,y,r,sAngle,eAngle,counterclockwise);</span><br><span class="line">//正上方1.5*PI</span><br><span class="line">ctx.stoke();</span><br><span class="line">ctx.closePath();</span><br><span class="line">ctx.restore();</span><br><span class="line">ctx.save();</span><br><span class="line">var fontSize = 16;</span><br><span class="line">ctx.fillStyle = &quot;#fff&quot;;</span><br><span class="line">ctx.font = fontSize + &quot;px 微软雅黑&quot;;</span><br><span class="line">ctx.textAlign = &quot;center&quot;;</span><br><span class="line">ctx.fillText(&quot;通过率&quot;, r, r-fontSize + 15);</span><br><span class="line">//换行的话，多写一行即可。</span><br><span class="line">ctx.fillText( Math.round((tmpAngle - startAngle)/(endAngle - startAngle) * 100) + &apos;%&apos;, r, r+fontSize);</span><br><span class="line"></span><br><span class="line">var rander = function() &#123;</span><br><span class="line">    requestAnimateFrame(rander);//1、经过浏览器优化，动画更流畅；2、窗口没激活时，动画将停止，省计算资源；3、更省电，尤其对移动终端</span><br><span class="line">&#125;</span><br><span class="line">//有时候我们需要加一些控制，requestAnimationFrame也可以想setInterval一样返回一个句柄，然后可以由此取消它</span><br><span class="line">var globalID;</span><br><span class="line">function animate () &#123;</span><br><span class="line">    globalID = requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line">gloabalID = requestAnimationnFrame(animate); //start</span><br><span class="line">cancelAnimationFrame(globalID); //Stop</span><br><span class="line">//兼容多种环境</span><br><span class="line">(function() &#123;  </span><br><span class="line">    var lastTime = 0;  </span><br><span class="line">    var vendors = [&apos;ms&apos;, &apos;moz&apos;, &apos;webkit&apos;, &apos;o&apos;];  </span><br><span class="line">    for(var x = 0; x &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++x) &#123;  </span><br><span class="line">        window.requestAnimationFrame = window[vendors[x]+&apos;RequestAnimationFrame&apos;];  </span><br><span class="line">        window.cancelAnimationFrame = window[vendors[x]+&apos;CancelAnimationFrame&apos;]   </span><br><span class="line">                                   || window[vendors[x]+&apos;CancelRequestAnimationFrame&apos;];  </span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">    if (!window.requestAnimationFrame)  </span><br><span class="line">        window.requestAnimationFrame = function(callback, element) &#123;  </span><br><span class="line">            var currTime = new Date().getTime();  </span><br><span class="line">            var timeToCall = Math.max(0, 16 - (currTime - lastTime));  </span><br><span class="line">            var id = window.setTimeout(function() &#123; callback(currTime + timeToCall); &#125;,   </span><br><span class="line">              timeToCall);  </span><br><span class="line">            lastTime = currTime + timeToCall;  </span><br><span class="line">            return id;  </span><br><span class="line">        &#125;;  </span><br><span class="line">   </span><br><span class="line">    if (!window.cancelAnimationFrame)  </span><br><span class="line">        window.cancelAnimationFrame = function(id) &#123;  </span><br><span class="line">            clearTimeout(id);  </span><br><span class="line">        &#125;;  </span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//兼容环境升级版</span><br><span class="line">// requestAnimationFrame polyfill by Erik Möller.</span><br><span class="line">// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavič, Darius Bacon</span><br><span class="line"> </span><br><span class="line">// MIT license</span><br><span class="line"> </span><br><span class="line">if (!Date.now)</span><br><span class="line">    Date.now = function() &#123; return new Date().getTime(); &#125;;</span><br><span class="line"> </span><br><span class="line">(function() &#123;</span><br><span class="line">    &apos;use strict&apos;;</span><br><span class="line">    </span><br><span class="line">    var vendors = [&apos;webkit&apos;, &apos;moz&apos;];</span><br><span class="line">    for (var i = 0; i &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++i) &#123;</span><br><span class="line">        var vp = vendors[i];</span><br><span class="line">        window.requestAnimationFrame = window[vp+&apos;RequestAnimationFrame&apos;];</span><br><span class="line">        window.cancelAnimationFrame = (window[vp+&apos;CancelAnimationFrame&apos;]</span><br><span class="line">                                   || window[vp+&apos;CancelRequestAnimationFrame&apos;]);</span><br><span class="line">    &#125;</span><br><span class="line">    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) // iOS6 is buggy</span><br><span class="line">        || !window.requestAnimationFrame || !window.cancelAnimationFrame) &#123;</span><br><span class="line">        var lastTime = 0;</span><br><span class="line">        window.requestAnimationFrame = function(callback) &#123;</span><br><span class="line">            var now = Date.now();</span><br><span class="line">            var nextTime = Math.max(lastTime + 16, now);</span><br><span class="line">            return setTimeout(function() &#123; callback(lastTime = nextTime); &#125;,</span><br><span class="line">                              nextTime - now);</span><br><span class="line">        &#125;;</span><br><span class="line">        window.cancelAnimationFrame = clearTimeout;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line">//星空图动画：</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            overflow:hidden;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;canvas id=&quot;motion&quot;&gt;Canvas is not supported in your browser.&lt;/canvas&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    // requestAnimationFrame polyfill by Erik Möller.</span><br><span class="line">    if (!Date.now)</span><br><span class="line">        Date.now = function() &#123; return new Date().getTime(); &#125;;</span><br><span class="line"></span><br><span class="line">    (function() &#123;</span><br><span class="line">        &apos;use strict&apos;;       </span><br><span class="line">        var vendors = [&apos;webkit&apos;, &apos;moz&apos;];</span><br><span class="line">        for (var i = 0; i &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++i) &#123;</span><br><span class="line">            var vp = vendors[i];</span><br><span class="line">            window.requestAnimationFrame = window[vp+&apos;RequestAnimationFrame&apos;];</span><br><span class="line">            window.cancelAnimationFrame = (window[vp+&apos;CancelAnimationFrame&apos;]</span><br><span class="line">                                    || window[vp+&apos;CancelRequestAnimationFrame&apos;]);</span><br><span class="line">        &#125;</span><br><span class="line">        if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) // iOS6 is buggy</span><br><span class="line">            || !window.requestAnimationFrame || !window.cancelAnimationFrame) &#123;</span><br><span class="line">            var lastTime = 0;</span><br><span class="line">            window.requestAnimationFrame = function(callback) &#123;</span><br><span class="line">                var now = Date.now();</span><br><span class="line">                var nextTime = Math.max(lastTime + 16, now);</span><br><span class="line">                return setTimeout(function() &#123; callback(lastTime = nextTime); &#125;,</span><br><span class="line">                                nextTime - now);</span><br><span class="line">            &#125;;</span><br><span class="line">            window.cancelAnimationFrame = clearTimeout;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;());</span><br><span class="line"></span><br><span class="line">    var getRandomColor = function()&#123;</span><br><span class="line">        return &apos;#&apos;+(Math.random()*0xffffff&lt;&lt;0).toString(16);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var canvas = document.getElementById(&quot;motion&quot;), </span><br><span class="line">        c = canvas.getContext(&quot;2d&quot;),</span><br><span class="line">        particles = &#123;&#125;,</span><br><span class="line">        particleIndex = 0,</span><br><span class="line">        particleNum = 0.2;</span><br><span class="line"></span><br><span class="line">    canvas.width = window.innerWidth;</span><br><span class="line">    canvas.height = window.innerHeight;</span><br><span class="line"></span><br><span class="line">    function Particle()&#123;</span><br><span class="line">        this.x = canvas.width/2;</span><br><span class="line">        this.y = canvas.height/2;</span><br><span class="line"></span><br><span class="line">        this.vx = Math.random() * 6 - 3;</span><br><span class="line">        this.vy = Math.random() * 4 - 2;</span><br><span class="line"></span><br><span class="line">        this.growth = ( Math.abs(this.vx) + Math.abs(this.vy) ) * 0.007;</span><br><span class="line"></span><br><span class="line">        particleIndex++;</span><br><span class="line">        particles[particleIndex] = this;</span><br><span class="line">        this.id = particleIndex;</span><br><span class="line">        this.size = Math.random() * 1;</span><br><span class="line">        this.color = getRandomColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Particle.prototype.draw = function()&#123;</span><br><span class="line">        this.x += this.vx;</span><br><span class="line">        this.y += this.vy;</span><br><span class="line"></span><br><span class="line">        this.size += this.growth;</span><br><span class="line">        if(this.x &gt; canvas.width || this.y &gt; canvas.height)&#123;</span><br><span class="line">            delete particles[this.id];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        c.fillStyle = this.color;</span><br><span class="line">        c.beginPath();</span><br><span class="line">        c.arc(this.x, this.y, this.size,0*Math.PI,2*Math.PI);</span><br><span class="line">        c.fill();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    function animate()&#123;</span><br><span class="line">        requestAnimationFrame( animate );        </span><br><span class="line">        c.fillStyle = &quot;#000&quot;;</span><br><span class="line">        c.fillRect(0,0,canvas.width,canvas.height);</span><br><span class="line">        if(Math.random() &gt; particleNum)&#123;</span><br><span class="line">            new Particle();</span><br><span class="line">        &#125;</span><br><span class="line">        for(var i in particles)&#123;</span><br><span class="line">            particles[i].draw();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    requestAnimationFrame( animate );</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/canvas画图的使用总结/" data-id="cjuzd8ndi00036ot6pm596llj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-thinkphp3-2-react开发上传文件展示信息学习记录" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/" class="article-date">
  <time datetime="2019-03-11T14:03:51.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/">thinkphp3.2 + react开发上传文件展示信息学习记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、ant插件的使用："><a href="#一、ant插件的使用：" class="headerlink" title="一、ant插件的使用："></a>一、ant插件的使用：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 项目需要引入ant </span><br><span class="line">安装：npm install antd --save</span><br><span class="line">使用：import &#123; 组件名称 &#125; from &apos;antd&apos;（比如import &#123; Switch &#125; from &apos;antd&apos;）</span><br><span class="line">还要引用其样式：import &apos;antd/dist/antd.css&apos;</span><br><span class="line">但是这样直接引用样式会有一些不必要的组件也被引入进来 需要配置webpack进行按需加载</span><br><span class="line">安装babel-plugin-import</span><br><span class="line">npm install babel-plugin-import --save-dev</span><br><span class="line">配置webpack：</span><br><span class="line">&#123; </span><br><span class="line">    test: /\.(js|jsx)$/, </span><br><span class="line">    exclude: /node_modules/, </span><br><span class="line">    loader: &quot;babel-loader&quot;, </span><br><span class="line">    query: &#123;</span><br><span class="line">        presets:[&apos;es2015&apos;,&apos;react&apos;],</span><br><span class="line">        plugins: [</span><br><span class="line">            [&quot;import&quot;, &#123;libraryName: &quot;antd&quot;, style: &quot;css&quot;&#125;] //按需加载</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">放在module rules下面</span><br><span class="line">上述配置完毕直接使用组件： &lt;Switch defaultChecked=&#123;false&#125; /&gt;</span><br><span class="line"></span><br><span class="line">// 个人实际引用经验  因为react与vue的特性区别，react不需要指令也不需要“:”锁定，没一个引入的特性均包括在中括号之下，antd常在插件上使用一些属性，需要&#123;&#125;包裹</span><br></pre></td></tr></table></figure>
<h1 id="二、thinkphp3-2核心功能代码部分："><a href="#二、thinkphp3-2核心功能代码部分：" class="headerlink" title="二、thinkphp3.2核心功能代码部分："></a>二、thinkphp3.2核心功能代码部分：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 上传文件的相关配置，thinkphp使用不是很熟练，切忌单纯的去百度，百度上常放着的问题是大家都会遇到的，简单的是找不到的</span><br><span class="line">        $upload=new \Think\Upload();//实例化上传类</span><br><span class="line">        $upload-&gt;saveName = $count; //设置上传文件名称</span><br><span class="line">        $upload-&gt;autoSub = false; // 上传时不添加时间目录</span><br><span class="line">        $upload-&gt;maxSize = 3145728 ;// info设置附info件上传大小 2M = 1024*1024*2=2097152 3M = 1024*1024*3=3145728</span><br><span class="line">        $upload-&gt;exts = array(&apos;jpg&apos;,&apos;jpeg&apos;,&apos;png&apos;,&apos;gif&apos;);</span><br><span class="line">        $upload-&gt;rootPath =&apos;./public/info/&apos;.$Model.&quot;/&quot;; // 设置附件上传根目录</span><br><span class="line">        $info = $upload-&gt;uploadOne($_FILES[&apos;img&apos;]);</span><br><span class="line">        $return[&apos;img&apos;] = $_FILES[&apos;img&apos;];</span><br><span class="line">        if(!$info)&#123;</span><br><span class="line">            $this-&gt;error($upload-&gt;getError());</span><br><span class="line">        &#125;else&#123;//成功</span><br><span class="line">            $res = M($Model) -&gt; add($data);</span><br><span class="line">            $return[&apos;data&apos;] = $res;</span><br><span class="line">            $this -&gt; ajaxReturn($return); // 以json格式返回给前端数据</span><br><span class="line">        &#125;</span><br><span class="line">// limit，count</span><br><span class="line">    $res = M($Model) -&gt; where($map) -&gt; limit($startNum, $endNum) -&gt; field (&apos;id&apos;,&apos;name&apos;)-&gt; select();</span><br><span class="line">    $res = M($Model) -&gt; count();  // $res一直是个数组 json格式的获取 $res[&apos;name&apos;]</span><br><span class="line">// thinkphp字符串的拼接是靠 &quot;.&quot;</span><br></pre></td></tr></table></figure>
<h1 id="三、React部分"><a href="#三、React部分" class="headerlink" title="三、React部分"></a>三、React部分</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">// 问题1： axios的引入</span><br><span class="line">// 封装http</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import qs from &apos;querystring&apos;</span><br><span class="line"></span><br><span class="line">let http = &#123;post: &quot;&quot;, get: &quot;&quot;&#125;</span><br><span class="line"></span><br><span class="line">http.post = function (api, data) &#123;</span><br><span class="line">    let params = qs.stringify(data)</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        axios.post(&apos;http://localhost/Fun/index.php/Home&apos; + api, params).then((res) =&gt; &#123;</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.get = function (api, data) &#123;</span><br><span class="line">    let params = qs.stringify(data)</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        axios.get(&apos;http://localhost/Fun/index.php/Home&apos; + api, params).then((res) =&gt; &#123;</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default http</span><br><span class="line">// axios普通的get\post上传时没有问题的，但是上传文件靠form_data的时候，推荐使用ajax</span><br><span class="line">// 问题2： reducer的使用和总结</span><br><span class="line">// 封装reducer :包括action、reducer  =&gt; 生成store，在每个需要使用store的位置引用即可  react需要注意公用的特性，入口文件加载一次并不会如vue一样，每个页面都包括该内容</span><br><span class="line">// 1、先创建TODOList.js  export 多个值，再解构赋值即可</span><br><span class="line">export const Path = handleActions(&#123;</span><br><span class="line">    &apos;CHANGE_PATH&apos;(state,action) &#123;</span><br><span class="line">        sessionStorage.setItem(&apos;Path&apos;, action.Path); // 使用sessionStorage来保证值存储在各个页面之间</span><br><span class="line">        return action.Path</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,sessionStorage.getItem(&apos;Path&apos;)?sessionStorage.getItem(&apos;Path&apos;):&apos;/login&apos;)</span><br><span class="line">// 2、create Store</span><br><span class="line">import &#123; combineReducers &#125; from &apos;redux&apos;</span><br><span class="line">import * as todoList from &apos;./todoList&apos;</span><br><span class="line">import &#123;createStore&#125; from  &apos;redux&apos;</span><br><span class="line">const rootReducer = combineReducers(&#123;</span><br><span class="line">  ...todoList,</span><br><span class="line">&#125;)</span><br><span class="line">const store = createStore(rootReducer)</span><br><span class="line">export default store</span><br><span class="line">// </span><br><span class="line">// 问题3： 页面跳转及传值</span><br><span class="line">    // 关于这方面的内容，我还没有更清晰的了解。我发现的规律如下：</span><br><span class="line">    // 1、在没有props的情况下，可以使用this.props.history.push(&apos;path&apos;);</span><br><span class="line">    //  不过通常使用window.location.href = &quot;&quot;</span><br><span class="line">// 路由</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line">import &#123; Router &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import &#123; Route &#125; from &apos;react-router&apos;</span><br><span class="line">import Login from &apos;./../home/pages/Login&apos;</span><br><span class="line">import Container from &apos;./../home/container&apos;</span><br><span class="line">import createBrowserHistory from &apos;history/createBrowserHistory&apos;</span><br><span class="line"></span><br><span class="line">const customHistory = createBrowserHistory()</span><br><span class="line"></span><br><span class="line">const routes = (</span><br><span class="line">  &lt;Router history=&#123;customHistory&#125; &gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&quot;/&quot; exact component=&#123;Login&#125; /&gt;</span><br><span class="line">      &lt;Route path=&quot;/index&quot; component=&#123;Container&#125;/&gt;</span><br><span class="line">      &lt;Route path=&quot;/login&quot; component=&#123;Login&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">export default routes;</span><br><span class="line"></span><br><span class="line">// 对应的index.js</span><br><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &#123; routes &#125;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">);</span><br><span class="line">// 路由使用特点：</span><br><span class="line">// 1、路径中共有的内容，可作为共享部分</span><br><span class="line">// 2、 exact 绝对地址  form ... to</span><br><span class="line">// 其他：</span><br><span class="line">// 1、 vue中的数组无length长度等属性，react不确定</span><br><span class="line">// 2、 this.state在使用的过程中，一般在函数见传递打印的均为上一次保留的数据，只有在页面中得到彰显之后才有效</span><br><span class="line">// 3、 加载DOM之前的函数 componentDidMount () &#123;&#125; 通常数据获取从此处进行</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/" data-id="cjuzd8ne4000b6ot6jplq2tlv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkPHP3-2、react、ant插件/">thinkPHP3.2、react、ant插件</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github-Page博客、hexo、git/">Github Page博客、hexo、git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax请求json、谷歌json跨域/">ajax请求json、谷歌json跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataGrid、easy-ui/">dataGrid、easy-ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts、常用指令/">echarts、常用指令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo博客、转移电脑/">hexo博客、转移电脑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/restful、rest、url与uri、soap与restful/">restful、rest、url与uri、soap与restful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg、在HTML中画数据库物理模型图/">svg、在HTML中画数据库物理模型图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/textarea自动缩放/">textarea自动缩放</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thinkPHP3-2、react、ant插件/">thinkPHP3.2、react、ant插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、axios、代理/">vue、axios、代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、vueRouter、权限、钩子函数/">vue、vueRouter、权限、钩子函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、vuex/">vue、vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、页面数据传递、父子组件/">vue、页面数据传递、父子组件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue基础/">vue基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ztree、常用特性/">ztree、常用特性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/物理分辨率-逻辑分辨率、rpx-px/">物理分辨率&逻辑分辨率、rpx&px</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Github-Page博客、hexo、git/" style="font-size: 10px;">Github Page博客、hexo、git</a> <a href="/tags/ajax请求json、谷歌json跨域/" style="font-size: 10px;">ajax请求json、谷歌json跨域</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/dataGrid、easy-ui/" style="font-size: 10px;">dataGrid、easy-ui</a> <a href="/tags/echarts、常用指令/" style="font-size: 10px;">echarts、常用指令</a> <a href="/tags/hexo博客、转移电脑/" style="font-size: 10px;">hexo博客、转移电脑</a> <a href="/tags/restful、rest、url与uri、soap与restful/" style="font-size: 10px;">restful、rest、url与uri、soap与restful</a> <a href="/tags/svg、在HTML中画数据库物理模型图/" style="font-size: 10px;">svg、在HTML中画数据库物理模型图</a> <a href="/tags/textarea自动缩放/" style="font-size: 10px;">textarea自动缩放</a> <a href="/tags/thinkPHP3-2、react、ant插件/" style="font-size: 10px;">thinkPHP3.2、react、ant插件</a> <a href="/tags/vue、axios、代理/" style="font-size: 10px;">vue、axios、代理</a> <a href="/tags/vue、vueRouter、权限、钩子函数/" style="font-size: 10px;">vue、vueRouter、权限、钩子函数</a> <a href="/tags/vue、vuex/" style="font-size: 10px;">vue、vuex</a> <a href="/tags/vue、页面数据传递、父子组件/" style="font-size: 10px;">vue、页面数据传递、父子组件</a> <a href="/tags/vue基础/" style="font-size: 10px;">vue基础</a> <a href="/tags/ztree、常用特性/" style="font-size: 10px;">ztree、常用特性</a> <a href="/tags/物理分辨率-逻辑分辨率、rpx-px/" style="font-size: 10px;">物理分辨率&逻辑分辨率、rpx&px</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/27/RESTful用法及与SOAP webserver比较/">RESTful用法及与SOAP webserver比较</a>
          </li>
        
          <li>
            <a href="/2019/04/17/让文本框自动适应内容的高度 & 让文本框显示折叠、收放/">让文本框自动适应内容的高度 &amp; 让文本框显示折叠、收放</a>
          </li>
        
          <li>
            <a href="/2019/04/17/iphone6的750x1334分辨率排版开发APP及小程序的原因/">iphone6的750x1334分辨率排版开发APP及小程序的原因</a>
          </li>
        
          <li>
            <a href="/2019/04/11/svg画数据库物理模型图/">svg画数据库物理模型图</a>
          </li>
        
          <li>
            <a href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/">ajax请求本地json文件，谷歌浏览器报跨域错误</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>