<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-svg画数据库物理模型图" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/11/svg画数据库物理模型图/" class="article-date">
  <time datetime="2019-04-11T13:55:10.000Z" itemprop="datePublished">2019-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/svg画数据库物理模型图/">svg画数据库物理模型图</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。"><a href="#突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。" class="headerlink" title="突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。"></a>突然有一天，新的需求下来，需要根据后台返回数据画出数据库物理模型图，不定表数量，不定表字段。印象中都是靠手动的依靠画图工具完成，或者数据库直接生成，各种工具寻找的愁苦，直到找到了一个大神自己延伸的工具，向大神们学习。</h6><p>原文地址：<a href="https://blog.csdn.net/qq_37146850/article/details/75050901" target="_blank" rel="noopener">https://blog.csdn.net/qq_37146850/article/details/75050901</a></p>
<p>GitHub地址： <a href="https://github.com/cpettitt/dagre-d3" target="_blank" rel="noopener">https://github.com/cpettitt/dagre-d3</a></p>
<h6 id="demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3-js、d3v4-js-改文件的原地址找不到了-，此项目的demo可以由此提取："><a href="#demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3-js、d3v4-js-改文件的原地址找不到了-，此项目的demo可以由此提取：" class="headerlink" title="demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3.js、d3v4.js(改文件的原地址找不到了)，此项目的demo可以由此提取："></a>demo的功能强大，不过我此处画出数据库物理模型图主要使用两个js文件：dagre-d3.js、d3v4.js(改文件的原地址找不到了)，此项目的demo可以由此提取：</h6><p>链接：<a href="https://pan.baidu.com/s/1zVY4-tn4Vrf5VDSIQeGUSQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1zVY4-tn4Vrf5VDSIQeGUSQ</a><br>提取码：gyn5 </p>
<p>效果图如下：<br><img src="http://39.106.9.2/blogImg/2019-04-13svg_sqlModel.png#pic_center=200x400&quot;svg 数据库物理模型效果图&quot;" alt="svg 数据库物理模型效果图"></p>
<h6 id="都是前人的经验，就只提供一下效果图及demo文件，自行研究。"><a href="#都是前人的经验，就只提供一下效果图及demo文件，自行研究。" class="headerlink" title="都是前人的经验，就只提供一下效果图及demo文件，自行研究。"></a>都是前人的经验，就只提供一下效果图及demo文件，自行研究。</h6>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/11/svg画数据库物理模型图/" data-id="cjuet870u0005mwt6rfpdmpn7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/svg、在HTML中画数据库物理模型图/">svg、在HTML中画数据库物理模型图</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ajax请求本地json文件，谷歌浏览器报跨域错误" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/" class="article-date">
  <time datetime="2019-04-11T12:59:55.000Z" itemprop="datePublished">2019-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/">ajax请求本地json文件，谷歌浏览器报跨域错误</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下："><a href="#前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下：" class="headerlink" title="前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下："></a>前端在做页面的时候，有时候需要可能为了测试某一功能，或者为了自己做demo，会访问本地json文件，获取数据，进行处理；但最近发现使用ajax请求json文件的时候，谷歌浏览器报错如下：</h5><h6 id="Access-to-XMLHttpRequest-at-‘file-…’-from-origin-‘null’-has-been-blocked-by-CORS-policy-Cross-origin-requests-are-only-supported-for-protocol-schemes-http-data-chrome-chrome-extension-https"><a href="#Access-to-XMLHttpRequest-at-‘file-…’-from-origin-‘null’-has-been-blocked-by-CORS-policy-Cross-origin-requests-are-only-supported-for-protocol-schemes-http-data-chrome-chrome-extension-https" class="headerlink" title="Access to XMLHttpRequest at ‘file:///…’ from origin ‘null’ has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https."></a>Access to XMLHttpRequest at ‘file:///…’ from origin ‘null’ has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, chrome, chrome-extension, https.</h6><h6 id="意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。"><a href="#意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。" class="headerlink" title="意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。"></a>意即：跨域请求仅支持协议方案：http、data、chrome、chrome-extension、https。换句话说，认识访问本地文件是跨域行为，谷歌浏览器的安全机制会使得跨域失败。至于为什么，表示看了一些前人总结，我只总结出几句话“谷歌浏览器的安全策略，禁止ajax访问本地的文件，这是不安全的不被允许的”。</h6><h6 id="经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。"><a href="#经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。" class="headerlink" title="经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。"></a>经测试，火狐、IE都是可以访问本地ajax文件，没有跨域问题的。</h6><h4 id="解决谷歌浏览器需要请求本地json文件："><a href="#解决谷歌浏览器需要请求本地json文件：" class="headerlink" title="解决谷歌浏览器需要请求本地json文件："></a>解决谷歌浏览器需要请求本地json文件：</h4><p>1、jsonp（jsonp请求本地与请求其他服务器有不一样的用法）</p>
<p>2、项目中使用nginx反向代理（自行了解，nginx是个不错的代理服务器）</p>
<p>3、在webstorm中打开（webstorm中自带了一个本地服务器，会在浏览器中开一个端口）</p>
<p>4、修改谷歌浏览器的配置（不知怎么修改，且不实用）</p>
<h6 id="综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。"><a href="#综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。" class="headerlink" title="综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。"></a>综上，此处采取最经常实用的jsonp请求，经过自己实践和总结直接写出经验：ajax是无法在谷歌之下请求到本地文件的，与jsonp的配合也是用在访问其他服务器。</h6><h3 id="jsonp请求json文件方法："><a href="#jsonp请求json文件方法：" class="headerlink" title="jsonp请求json文件方法："></a>jsonp请求json文件方法：</h3><h5 id="1、jsonp请求本地json文件"><a href="#1、jsonp请求本地json文件" class="headerlink" title="1、jsonp请求本地json文件"></a>1、jsonp请求本地json文件</h5><h6 id="不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src-jsonp方式”，具体用法如下："><a href="#不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src-jsonp方式”，具体用法如下：" class="headerlink" title="不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src + jsonp方式”，具体用法如下："></a>不知道大家在使用script的src属性引入CDN文件的时候，有没有注意到这是一个不用考虑跨域的请求其他服务器并成功获取文件的方式。所以，请求本地文件就是使用“script的src + jsonp方式”，具体用法如下：</h6><p>json文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">callbackFun（&#123;</span><br><span class="line">    &quot;data&quot;: [&#123;</span><br><span class="line">        &quot;id&quot;: 1,</span><br><span class="line">        &quot;name&quot;: &quot;z&quot;</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        &quot;id&quot;: 2,</span><br><span class="line">        &quot;name&quot;: &quot;m&quot;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;）</span><br><span class="line">// 此处的callbackFun与下面的函数名对应</span><br></pre></td></tr></table></figure>
<p>html页面中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">	function callbackFun (data) &#123;</span><br><span class="line">        console.log(data);</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;./data.json?callback=callbackFuc&quot;&gt;&lt;/script&gt;</span><br><span class="line">// callback代表json的回调函数，callbackFun为回调函数名，及你要进行处理数据的函数名</span><br><span class="line">// callbackFun回调函数必须放在前面</span><br></pre></td></tr></table></figure>
<h5 id="2、jsonp-ajax请求其他服务器文件"><a href="#2、jsonp-ajax请求其他服务器文件" class="headerlink" title="2、jsonp + ajax请求其他服务器文件"></a>2、jsonp + ajax请求其他服务器文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    async : true,</span><br><span class="line">    url : &quot;https://xxx/xx/xx&quot;,</span><br><span class="line">    type : &quot;GET&quot;,</span><br><span class="line">    dataType : &quot;jsonp&quot;, // 返回的数据类型，设置为JSONP方式</span><br><span class="line">    jsonp : &apos;callback&apos;, //指定一个查询参数名称来覆盖默认的 jsonp 回调参数名 callback</span><br><span class="line">    jsonpCallback: &apos;handleResponse&apos;, //设置回调函数名</span><br><span class="line">    data : &#123;&#125;, </span><br><span class="line">    success: function(response, status, xhr)&#123;</span><br><span class="line">        console.log(&apos;状态为：&apos; + status + &apos;,状态是：&apos; + xhr.statusText);</span><br><span class="line">        console.log(response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 也可以通过getJSON</span><br><span class="line">$.getJSON(&quot;https://xxxx?xx=xx&amp;xx=xx&amp;callback=?&quot;, function(data)&#123;</span><br><span class="line">                console.log(data);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/" data-id="cjuet87090000mwt64tp01voc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax请求json、谷歌json跨域/">ajax请求json、谷歌json跨域</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue基本知识" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/vue基本知识/" class="article-date">
  <time datetime="2019-03-11T14:27:08.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/vue基本知识/">vue基本知识</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1、指令、</p>
<p>v-if vs v-for</p>
<p>​    当 Vue 处理指令时，v-for 比 v-if 具有更高的优先级，通过v-if 移动到容器元素，不会再重复遍历列表中的每个值。取而代之的是，我们只检查它一次，且不会在 v-if 为否的时候运算 v-for。永远不要把v-if和v-for同时用在同一元素上。</p>
<p>自定义</p>
<p>2、修改引入插件样式</p>
<ul>
<li>vue引用外部插件 发现内部style无法更改插件样式的解决办法（基于scoped添加限制每个页面样式的前提），假设插件引用上一级的样式为’.a’，需要更改控制的样式为’.b’</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、.a   /deep/  .b &#123;&#125;   </span><br><span class="line">2、.a &gt;&gt;&gt; .b &#123;&#125; </span><br><span class="line">3、去掉scoped，转为全局的样式</span><br></pre></td></tr></table></figure>
<p>关于样式的使用，还有以下的建议：</p>
<p>​    在vue中管理样式的时候，不止要使用scoped特性，使用唯一的class名可以帮你确保那些三房库的css不会运用到你自己的HTML上。比如许多工程常用的button、btn、icon等class名，所以添加一个APP专属或组件专属的前缀（比如ButtonClose-icon）也可以提供很多保护。</p>
<p>3、路由跳转页面的操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this.$router.push(&#123;path:”/Login”&#125;); 跳转到不同的url，但这个方法回向history栈添加一个记录，点击后退会返回到上一个页面。push中可以设置字符串:&apos;login&apos;，对象:&#123;path: &apos;login&apos;&#125;,命名的路由：&#123;name: &apos;login&apos;, params: &#123;id: 1&#125;&#125;，带查询参数（可转化成/register?a=&apos;aa&apos;）：&#123;path：&apos;register&apos;, query: &#123;a: &apos;aa&apos;&#125;&#125;</span><br><span class="line"></span><br><span class="line">this.$router.replace(&#123;path:”/Login”&#125;); 同样是跳转到指定的url，但是这个方法不会向history里面添加新的记录，点击返回，会跳转到上上一个页面。上一个记录是不存在的。</span><br><span class="line"></span><br><span class="line">this.$router.go(number); 相对于当前页面向前或向后跳转多少个页面,类似 window.history.go(n)。n可为正数可为负数。正数返回上一个页面</span><br></pre></td></tr></table></figure>
<p>4、vue双向绑定原理：</p>
<p>​    vue.js 是采用数据劫持结合发布者-订阅者模式的方式，通过Object.defineProperty()来劫持各个属性的setter，getter，在数据变动时发布消息给订阅者，触发相应的监听回调。</p>
<p>​    vue具有响应式布局，不是媒体查询的响应式布局，而是对数据变化进行响应的布局；组件开发，模块分装成一个个，便于开发；虚拟DOM，在计算完成最终的dom操作之前，使用的都是预处理操作，并没有操作真实的DOM，然后再将DOM操作变化反映到DOM树上。</p>
<p>​    虚拟DOM：“虚拟 DOM”是由 Vue 组件树建立起来的整个 VNode 树的称呼。思想是：对复杂的文档DOM结构，提供一种方便的工具，进行最小化DOM操作。</p>
<p>​    VNode：Vue在 页面上渲染的节点，及其子节点称为“虚拟节点 (Virtual Node)”，简写为“VNode”。</p>
<p>5、webpack</p>
<p>webpack的打包效用：整合所有的素材请求，只进行一次TCP握手和挥手的过程，就把多个资源给下载下来。多个资源共享一个HTTP请求，所以head部分也是共享的，相当于形成了规模效应，让网页展现的更快，用户体验更好。</p>
<p>6、MVVM模式：</p>
<p>​    Model-View-ViewModel；vue是以数据为驱动的，一旦创建dom和数据就保持同步，每当数据发生变化时，dom也会变化。DOMListener和DataBindings是实现双向绑定的关键。DOMListener监听页面所有View层DOM元素的变化，当发生变化，Model的数据随之变化；DataBindings监听Model层的数据，当数据发生变化，View层的DOM元素随之变化。</p>
<p>7、vue生命周期：</p>
<p>​    vue生命周期：Vue实例从创建到销毁的过程；开始创建、初始化数据、编译模板、挂载DOM-&gt;渲染、更新-&gt;渲染、卸载等过程。</p>
<p>​    生命周期有多个钩子函数，可以让我们在整个Vue实例运行过程中养成良好的处理数据逻辑。</p>
<p>​    生命周期总共分为八个阶段：创建前/后，载入前/后，更新前/后，销毁前/后。所以也是很好理解和记忆的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">beforeCreate:</span><br><span class="line">// loading，在加载实例时触发</span><br><span class="line">// 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。</span><br><span class="line">Created:</span><br><span class="line">// 初始化完成的写在卸载这里：如结束loading。</span><br><span class="line">// 实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。然而，挂载阶段还没开始，$el 属性目前不可见。</span><br><span class="line">beforeMount:</span><br><span class="line">// 在挂载开始之前被调用：相关的 render 函数首次被调用。</span><br><span class="line">Mounted:</span><br><span class="line">// 挂载元素，获取到DOM节点；第一次加载触发到这一步</span><br><span class="line">beforeUpdate:</span><br><span class="line">// 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。 你可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程。</span><br><span class="line">Updated:</span><br><span class="line">// 如果对数据统一处理，可在这里调用相应函数</span><br><span class="line">//由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。当这个钩子被调用时，组件 DOM 已经更新，所以你现在可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态，因为这可能会导致更新无限循环。该钩子在服务器端渲染期间不被调用</span><br><span class="line">beforeDestory:</span><br><span class="line">// 实例销毁之前调用。在这一步，实例仍然完全可用。</span><br><span class="line">Destoryed:</span><br><span class="line">// Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</span><br><span class="line">此处解释有参考：https://www.cnblogs.com/fly_dragon/p/6220273.html</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/vue基本知识/" data-id="cjuet871c000bmwt62l3hxy6z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue基础/">vue基础</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-easy-ui之dataGrid" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/easy-ui之dataGrid/" class="article-date">
  <time datetime="2019-03-11T14:26:45.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/easy-ui之dataGrid/">easy-ui之dataGrid</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>datagrid学习：</li>
</ul>
<p>(1)datagrid 参数字段 </p>
<p>​        getSelected、getSelections、getEditor、validateRow（验证组）、getRows（获取数组）、endEditer、loaded（完成加载）、beginEdit、cancelEdit、deleteRow、acceptChanges、rejectChanges、getChanges</p>
<p>(2)data-options 属性 可以设置的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">url:</span><br><span class="line"></span><br><span class="line">singSelect:</span><br><span class="line"></span><br><span class="line">toolbar:</span><br><span class="line"></span><br><span class="line">method:</span><br><span class="line"></span><br><span class="line">onClickRow:</span><br><span class="line"></span><br><span class="line">sortable:true/false;</span><br><span class="line"></span><br><span class="line">remoteSort:false/true;</span><br><span class="line"></span><br><span class="line">multiSort:true/false;</span><br><span class="line"></span><br><span class="line">collapsible:true/false;</span><br><span class="line"></span><br><span class="line">rownumbers:true;</span><br><span class="line"></span><br><span class="line">onLoadSuccess:function()&#123;</span><br><span class="line"></span><br><span class="line">    $(this).datagrid(&apos;freezeRow&apos;,0).datagrid(&apos;freezeRow&apos;,1);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">frozen:true/false;  在不需要变化的地方设置frozen=true;</span><br><span class="line"></span><br><span class="line">formatter:  js的function名</span><br><span class="line"></span><br><span class="line">         js的function名：funtion(val,row)&#123;     &#125; ;</span><br><span class="line"></span><br><span class="line">hideColumn -- item.name</span><br><span class="line"></span><br><span class="line">showColumn -- item.name</span><br></pre></td></tr></table></figure>
<p>(3)</p>
<p>var cmenu = $(‘<div>’).appendTo(‘body’);</div></p>
<p>cmenu.menu({ onclick： })</p>
<p>datagrid的format有三个参数（value,rowDatas,rowIndex)，rowDatas是整列的数据，value应该对应着某一列的值，rowIndex应该是某列的排序，</p>
<p>​        </p>
<p>在此列下传参的JavaScript的参数只能是rowIndex，必要情况下可以借由数组来更新。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#aa&quot;).datagrid(&apos;showColumn&apos;,&apos;XXX&apos;); // item.name</span><br><span class="line">$(&quot;#aa&quot;).datagrid(&apos;hideColumn&apos;,&apos;XXX&apos;); //  显示和隐藏，正常的display等的编辑是不起效果的。</span><br></pre></td></tr></table></figure>
<p>不过，也要意识到，当自己解决一个问题时，可以将解决办法以及对应效果进行记录和整理，方便观察失败的原因，对比查漏解决的办法，或许只是自己用错方法了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/easy-ui之dataGrid/" data-id="cjuet870q0003mwt6rnmy59ae" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dataGrid、easy-ui/">dataGrid、easy-ui</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ztree树结构总结" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/ztree树结构总结/" class="article-date">
  <time datetime="2019-03-11T14:24:54.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/ztree树结构总结/">ztree树结构总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>ztree学习：<a href="http://www.treejs.cn/v3/api.php" target="_blank" rel="noopener">http://www.treejs.cn/v3/api.php</a></li>
</ul>
<p><strong>// 1 原型$.fn.zTree</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">$.fn.zTree = &#123;</span><br><span class="line">    consts // 常量对象；</span><br><span class="line">    _z // zTree v3.x 内部的全部方法都可以通过 $.fn.zTree._z对象进行调用</span><br><span class="line">    getZTreeObj(treeId) // 根据treeId获取zTreeObj</span><br><span class="line">    destroy(treeId) // 根据treeId销毁tree</span><br><span class="line">    init: function(obj, zSetting, zNodes) &#123; // 初始化方法，返回zTreeObj对象；</span><br><span class="line"> ...</span><br><span class="line"> var zTreeTools = &#123; // 参考API的zTreeObj对象说明，是指API的zTreeObj对象；</span><br><span class="line">  setting : setting, // zTree 对象使用的 setting 配置数据，详细请参考 “setting 配置详解”中的各个属性详细说明</span><br><span class="line">  addNodes : function(parentNode, newNodes, isSilent) &#123; // 添加节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  cancelSelectedNode : function(node) &#123; // 取消节点的选中状态。</span><br><span class="line">   view.cancelPreSelectedNode(setting, node);</span><br><span class="line">  &#125;,</span><br><span class="line">  destroy : function() &#123; // 1、用此方法可以销毁 zTreeObj 代表的 zTree。</span><br><span class="line">     // 2、销毁当前页面全部的 zTree，也可以使用 $.fn.zTree.destroy() 方法。</span><br><span class="line">     // 3、重新使用已经被销毁的树，必须要使用 init 方法进行初始化。</span><br><span class="line">   view.destroy(setting);</span><br><span class="line">  &#125;,</span><br><span class="line">  expandAll : function(expandFlag) &#123; // 展开 / 折叠 全部节点</span><br><span class="line">   expandFlag = !!expandFlag;</span><br><span class="line">   view.expandCollapseSonNode(setting, null, expandFlag, true);</span><br><span class="line">   return expandFlag;</span><br><span class="line">  &#125;,</span><br><span class="line">  expandNode : function(node, expandFlag, sonSign, focus, callbackFlag) &#123; // 展开 / 折叠 指定的节点</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodes : function() &#123; // 获取 zTree 的全部节点数据</span><br><span class="line">   return data.getNodes(setting);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeByParam : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodeByParam(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeByTId : function(tId) &#123; // 根据 zTree 的唯一标识 tId 快速获取节点 JSON 数据对象</span><br><span class="line">   return data.getNodeCache(setting, tId);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByParam : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodesByParam(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByParamFuzzy : function(key, value, parentNode) &#123; // 根据节点数据的属性搜索，获取条件模糊匹配的节点数据 JSON 对象集合</span><br><span class="line">   if (!key) return null;</span><br><span class="line">   return data.getNodesByParamFuzzy(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), key, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodesByFilter: function(filter, isSingle, parentNode, invokeParam) &#123; // 根据自定义规则搜索节点数据 JSON 对象集合 或 单个节点数据</span><br><span class="line">   isSingle = !!isSingle;</span><br><span class="line">   if (!filter || (typeof filter != &quot;function&quot;)) return (isSingle ? null : []);</span><br><span class="line">   return data.getNodesByFilter(setting, parentNode?parentNode[setting.data.key.children]:data.getNodes(setting), filter, isSingle, invokeParam);</span><br><span class="line">  &#125;,</span><br><span class="line">  getNodeIndex : function(node) &#123; // 获取某节点在同级节点中的序号（从0开始）</span><br><span class="line">   if (!node) return null;</span><br><span class="line">   var childKey = setting.data.key.children,</span><br><span class="line">   parentNode = (node.parentTId) ? node.getParentNode() : data.getRoot(setting);</span><br><span class="line">   for (var i=0, l = parentNode[childKey].length; i &lt; l; i++) &#123;</span><br><span class="line">    if (parentNode[childKey][i] == node) return i;</span><br><span class="line">   &#125;</span><br><span class="line">   return -1;</span><br><span class="line">  &#125;,</span><br><span class="line">  getSelectedNodes : function() &#123; // 获取 zTree 当前被选中的节点数据集合</span><br><span class="line">   var r = [], list = data.getRoot(setting).curSelectedList;</span><br><span class="line">   for (var i=0, l=list.length; i&lt;l; i++) &#123;</span><br><span class="line">    r.push(list[i]);</span><br><span class="line">   &#125;</span><br><span class="line">   return r;</span><br><span class="line">  &#125;,</span><br><span class="line">  isSelectedNode : function(node) &#123; // 是否选中的节点</span><br><span class="line">   return data.isSelectedNode(setting, node);</span><br><span class="line">  &#125;,</span><br><span class="line">  reAsyncChildNodes : function(parentNode, reloadType, isSilent) &#123; // 强行异步加载父节点的子节点。[setting.async.enable = true 时有效]已经加载过的父节点可反复使用此方法重新加载。请通过 zTree 对象执行此方法。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  refresh : function() &#123; // 刷新 zTree</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  removeChildNodes : function(node) &#123; // 清空某父节点的子节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  removeNode : function(node, callbackFlag) &#123; // 删除节点。</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  selectNode : function(node, addFlag) &#123; // 选中指定节点</span><br><span class="line">   ...</span><br><span class="line">  &#125;,</span><br><span class="line">  transformTozTreeNodes : function(simpleNodes) &#123; // 将简单 Array 格式数据转换为 zTree 使用的标准 JSON 嵌套数据格式。</span><br><span class="line">   return data.transformTozTreeFormat(setting, simpleNodes);</span><br><span class="line">  &#125;,</span><br><span class="line">  transformToArray : function(nodes) &#123; // 将 zTree 使用的标准 JSON 嵌套格式的数据转换为简单 Array 格式。(免去用户自行编写递归遍历全部节点的麻烦)</span><br><span class="line">   return data.transformToArrayFormat(setting, nodes);</span><br><span class="line">  &#125;,</span><br><span class="line">  updateNode : function(node, checkTypeFlag) &#123; // 更新某节点数据，主要用于该节点显示属性的更新。</span><br><span class="line">   ...</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> root.treeTools = zTreeTools;</span><br><span class="line"> data.setZTreeTools(setting, zTreeTools);</span><br><span class="line"></span><br><span class="line"> if (root[childKey] &amp;&amp; root[childKey].length &gt; 0) &#123;</span><br><span class="line">  view.createNodes(setting, 0, root[childKey]);</span><br><span class="line"> &#125; else if (setting.async.enable &amp;&amp; setting.async.url &amp;&amp; setting.async.url !== &apos;&apos;) &#123;</span><br><span class="line">  view.asyncNode(setting);</span><br><span class="line"> &#125;</span><br><span class="line"> return zTreeTools;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>来源： <a href="http://blog.sina.com.cn/s/blog_667ac0360102ebk9.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_667ac0360102ebk9.html</a></p>
<ul>
<li>ztree新知识点补充：（不用重新刷新的更新节点方式，对象）</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、获取zTree对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> treeObj = $.fn.zTree.getZTreeObj(<span class="string">"ztreeDemo"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、找到要修改的树的节点</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> treeNode = treeObj.getNodeByParam(<span class="string">"task_id"</span>,tree_id);</span><br><span class="line"></span><br><span class="line"><span class="comment">//3、为要修改的节点赋值</span></span><br><span class="line"></span><br><span class="line">treeNode.name = tree_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4、修改该节点上的值</span></span><br><span class="line"></span><br><span class="line">treeObj.updateNode(treeNode);</span><br><span class="line"></span><br><span class="line">补充，添加节点：addNodes（如果与等级无关，其实也是不用更新的）；</span><br><span class="line"></span><br><span class="line">addNodes(parentNode,index,newNodes,isSlient);</span><br><span class="line"></span><br><span class="line"><span class="comment">//index：-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//isSlient：设定增加节点后是否自动展开父节点；true不展开；其他值或者缺省状态都自动展开。</span></span><br><span class="line"></span><br><span class="line">removeNode移除（对象）</span><br><span class="line"></span><br><span class="line">treeObj.removeNode(nodes[j]);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/ztree树结构总结/" data-id="cjuet871s000lmwt6zo177ugc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ztree、常用特性/">ztree、常用特性</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-canvas画图的使用总结" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/canvas画图的使用总结/" class="article-date">
  <time datetime="2019-03-11T14:15:24.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/canvas画图的使用总结/">canvas画图的使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">var c = $(&quot;#myCanvas&quot;),ctx = c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.clearRect(0,0,mW,mH);</span><br><span class="line">ctx.beginPath(); //起始一条路径，或重置当前路径</span><br><span class="line">ctx.lineWidth = 10;</span><br><span class="line">ctx.stokeStyle = &quot;#000&quot;; </span><br><span class="line">//var gradient = ctx.createLinearGradient(0,0,90,0); //(X0,Y0,X1,Y1)</span><br><span class="line">//gradient.addColorStop(0, #000);</span><br><span class="line">//gradient.addColorStop(1, #fff);</span><br><span class="line">//ctx.stokeStyle = gradient;</span><br><span class="line">//图片填充 pattern</span><br><span class="line">//var img=document.getElementById(&quot;lamp&quot;);</span><br><span class="line">//var pat=ctx.createPattern(img,&quot;repeat&quot;); //repeat|repeat-x|repeat-y|no-repeat</span><br><span class="line">//ctx.stokeStyle = pat;</span><br><span class="line">//放射状、圆形渐变</span><br><span class="line">//var grd=ctx.createRadialGradient(75,50,5,90,60,100);//(x0,y0,r1,x1,y1,r2);渐变开始的圆的坐标及半径</span><br><span class="line">//grd.addColorStop(0,&quot;red&quot;); //规定 gradient 对象中的颜色和位置。 0-1的位置均可以设置</span><br><span class="line">//grd.addColorStop(1,&quot;white&quot;);</span><br><span class="line">//ctx.fillStyle=grd;</span><br><span class="line"></span><br><span class="line">//canvas 路径</span><br><span class="line">//ctx.fill(); 填充当前绘图（路径） ctx.stoke(); 绘制已定义的路径</span><br><span class="line">//ctx.moveTo(); 把路径移动到画布的指定点，不创建线条。  ctx.lineTo();新添加一个点，然后再画布中创建从该点到最后指定点的线条</span><br><span class="line">//ctx.clip();从原始画布中剪切任意形状和尺寸.一旦剪切了某个区域，则所有之后的绘图都会被限制在被剪切的区域内（不能访问画布上的其他区域）。您也可以在使用 clip() 方法前通过使用 save() 方法对当前画布区域进行保存，并在以后的任意时间对其进行恢复（通过 restore() 方法）。</span><br><span class="line">//ctx.arcTo(150,20,150,70,50); // 创建弧 (X0,Y0,X1,Y1,r);</span><br><span class="line">//ctx.isPointInPath(x,y) 方法返回 true，如果指定的点位于当前路径中；否则返回 false</span><br><span class="line"></span><br><span class="line">//canvas线条样式</span><br><span class="line">//ctx.lineCap=&quot;round&quot;; butt/round/square</span><br><span class="line">//ctx.lineJoin=&quot;round&quot;; //miter/bevel/round</span><br><span class="line">//ctx.lineWidth=10; ctx.miterLimit=5; //折角最大长度</span><br><span class="line"></span><br><span class="line">//canvas矩形</span><br><span class="line">//ctx.rect(0,0,200,200);   ctx.fillRect(0,0,200,200); </span><br><span class="line">//ctx.stokeRect(20,20,150,100); //rect       ctx.clearRect(20,20,100,50); //使其中一部分显示空白</span><br><span class="line"></span><br><span class="line">//canvas文本</span><br><span class="line">//ctx.font=&quot;10px Arial&quot;;</span><br><span class="line">//ctx.textAlign=&quot;start|end|left|right|end&quot;; </span><br><span class="line">//ctx.textBaseline=&quot;alphabetic|top|hanging|middle|ideographic|bottom&quot;;</span><br><span class="line">//measureText() 方法返回包含一个对象，该对象包含以像素计的指定字体宽度。提示：如果您需要在文本向画布输出之前，就了解文本的宽度，那么请使用该方法。var txt=&quot;Hello World&quot; </span><br><span class="line">//ctx.fillText(&quot;width:&quot; + ctx.measureText(txt).width,10,50)</span><br><span class="line">//ctx.strokeText(&quot;Hello World!&quot;,10,50);</span><br><span class="line">//ctx.fillText(&quot;w3school.com.cn&quot;,10,90);</span><br><span class="line"></span><br><span class="line">//canvas drawImage</span><br><span class="line">//ctx.drawImage(img,x,y);</span><br><span class="line">//ctx.drawImage(img,x,y,width,height);</span><br><span class="line">//ctx.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);  剪切,要使用的</span><br><span class="line">//视频使用在画布之上</span><br><span class="line">//var v=document.getElementById(&quot;video1&quot;);</span><br><span class="line">//var c=document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">//ctx=c.getContext(&apos;2d&apos;);</span><br><span class="line">//v.addEventListener(&apos;play&apos;,function() &#123;var i=window.setInterval(function() </span><br><span class="line">//&#123;ctx.drawImage(v,0,0,270,135)&#125;,20);&#125;,false);</span><br><span class="line">//v.addEventListener(&apos;pause&apos;,function() &#123;window.clearInterval(i);&#125;,false);</span><br><span class="line">//v.addEventListener(&apos;ended&apos;,function() &#123;clearInterval(i);&#125;,false);</span><br><span class="line"></span><br><span class="line">//canvas 合成</span><br><span class="line">//ctx.gloabalAlpha = number;  globalAlpha 属性设置或返回绘图的当前透明值（alpha 或 transparency）。介于 0.0（完全透明） 与 1.0（不透明） 之间的数字。</span><br><span class="line">//globalCompositeOperation 属性设置或返回如何将一个源（新的）图像绘制到目标（已有）的图像上。属性值多个</span><br><span class="line">//source-over | source-atop | source-in | source-out | destination-over | destination-atop | destination-in | destination-out | lighter | copy | xor</span><br><span class="line"></span><br><span class="line">//canvas像素</span><br><span class="line">//var imgData=ctx.createImageData(width,height);</span><br><span class="line">//imgData.data[4]=0; imgData.data[5]=255; imgData.data[6]=0; imgData.data[7]=255;  //R\G\B\A</span><br><span class="line">//var imgData=ctx.createImageData(imageData); //与另一个尺寸相同</span><br><span class="line">//var imgData=ctx.getImageData(10,10,50,50); //拷贝</span><br><span class="line">//ctx.putImageData(imgData,10,70); //放置</span><br><span class="line"></span><br><span class="line">// canvas </span><br><span class="line">//ctx.rotate(angle); //旋转角度  ctx.scale(w,h);  放大大小1 = 100%;</span><br><span class="line">//ctx.translate(x,y) 方法重新映射画布上的 (0,0) 位置。后调用诸如 fillRect() 之类的方法时，值会添加到 x 和 y 坐标值上。</span><br><span class="line">//ctx.setTransform();  ctx.transform();</span><br><span class="line"></span><br><span class="line">ctx.arc( r, r, nR, startAngle, endAngle, false);//context.arc(x,y,r,sAngle,eAngle,counterclockwise);</span><br><span class="line">//正上方1.5*PI</span><br><span class="line">ctx.stoke();</span><br><span class="line">ctx.closePath();</span><br><span class="line">ctx.restore();</span><br><span class="line">ctx.save();</span><br><span class="line">var fontSize = 16;</span><br><span class="line">ctx.fillStyle = &quot;#fff&quot;;</span><br><span class="line">ctx.font = fontSize + &quot;px 微软雅黑&quot;;</span><br><span class="line">ctx.textAlign = &quot;center&quot;;</span><br><span class="line">ctx.fillText(&quot;通过率&quot;, r, r-fontSize + 15);</span><br><span class="line">//换行的话，多写一行即可。</span><br><span class="line">ctx.fillText( Math.round((tmpAngle - startAngle)/(endAngle - startAngle) * 100) + &apos;%&apos;, r, r+fontSize);</span><br><span class="line"></span><br><span class="line">var rander = function() &#123;</span><br><span class="line">    requestAnimateFrame(rander);//1、经过浏览器优化，动画更流畅；2、窗口没激活时，动画将停止，省计算资源；3、更省电，尤其对移动终端</span><br><span class="line">&#125;</span><br><span class="line">//有时候我们需要加一些控制，requestAnimationFrame也可以想setInterval一样返回一个句柄，然后可以由此取消它</span><br><span class="line">var globalID;</span><br><span class="line">function animate () &#123;</span><br><span class="line">    globalID = requestAnimationFrame(animate);</span><br><span class="line">&#125;</span><br><span class="line">gloabalID = requestAnimationnFrame(animate); //start</span><br><span class="line">cancelAnimationFrame(globalID); //Stop</span><br><span class="line">//兼容多种环境</span><br><span class="line">(function() &#123;  </span><br><span class="line">    var lastTime = 0;  </span><br><span class="line">    var vendors = [&apos;ms&apos;, &apos;moz&apos;, &apos;webkit&apos;, &apos;o&apos;];  </span><br><span class="line">    for(var x = 0; x &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++x) &#123;  </span><br><span class="line">        window.requestAnimationFrame = window[vendors[x]+&apos;RequestAnimationFrame&apos;];  </span><br><span class="line">        window.cancelAnimationFrame = window[vendors[x]+&apos;CancelAnimationFrame&apos;]   </span><br><span class="line">                                   || window[vendors[x]+&apos;CancelRequestAnimationFrame&apos;];  </span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">    if (!window.requestAnimationFrame)  </span><br><span class="line">        window.requestAnimationFrame = function(callback, element) &#123;  </span><br><span class="line">            var currTime = new Date().getTime();  </span><br><span class="line">            var timeToCall = Math.max(0, 16 - (currTime - lastTime));  </span><br><span class="line">            var id = window.setTimeout(function() &#123; callback(currTime + timeToCall); &#125;,   </span><br><span class="line">              timeToCall);  </span><br><span class="line">            lastTime = currTime + timeToCall;  </span><br><span class="line">            return id;  </span><br><span class="line">        &#125;;  </span><br><span class="line">   </span><br><span class="line">    if (!window.cancelAnimationFrame)  </span><br><span class="line">        window.cancelAnimationFrame = function(id) &#123;  </span><br><span class="line">            clearTimeout(id);  </span><br><span class="line">        &#125;;  </span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//兼容环境升级版</span><br><span class="line">// requestAnimationFrame polyfill by Erik Möller.</span><br><span class="line">// Fixes from Paul Irish, Tino Zijdel, Andrew Mao, Klemen Slavič, Darius Bacon</span><br><span class="line"> </span><br><span class="line">// MIT license</span><br><span class="line"> </span><br><span class="line">if (!Date.now)</span><br><span class="line">    Date.now = function() &#123; return new Date().getTime(); &#125;;</span><br><span class="line"> </span><br><span class="line">(function() &#123;</span><br><span class="line">    &apos;use strict&apos;;</span><br><span class="line">    </span><br><span class="line">    var vendors = [&apos;webkit&apos;, &apos;moz&apos;];</span><br><span class="line">    for (var i = 0; i &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++i) &#123;</span><br><span class="line">        var vp = vendors[i];</span><br><span class="line">        window.requestAnimationFrame = window[vp+&apos;RequestAnimationFrame&apos;];</span><br><span class="line">        window.cancelAnimationFrame = (window[vp+&apos;CancelAnimationFrame&apos;]</span><br><span class="line">                                   || window[vp+&apos;CancelRequestAnimationFrame&apos;]);</span><br><span class="line">    &#125;</span><br><span class="line">    if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) // iOS6 is buggy</span><br><span class="line">        || !window.requestAnimationFrame || !window.cancelAnimationFrame) &#123;</span><br><span class="line">        var lastTime = 0;</span><br><span class="line">        window.requestAnimationFrame = function(callback) &#123;</span><br><span class="line">            var now = Date.now();</span><br><span class="line">            var nextTime = Math.max(lastTime + 16, now);</span><br><span class="line">            return setTimeout(function() &#123; callback(lastTime = nextTime); &#125;,</span><br><span class="line">                              nextTime - now);</span><br><span class="line">        &#125;;</span><br><span class="line">        window.cancelAnimationFrame = clearTimeout;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line">//星空图动画：</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            overflow:hidden;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;canvas id=&quot;motion&quot;&gt;Canvas is not supported in your browser.&lt;/canvas&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    // requestAnimationFrame polyfill by Erik Möller.</span><br><span class="line">    if (!Date.now)</span><br><span class="line">        Date.now = function() &#123; return new Date().getTime(); &#125;;</span><br><span class="line"></span><br><span class="line">    (function() &#123;</span><br><span class="line">        &apos;use strict&apos;;       </span><br><span class="line">        var vendors = [&apos;webkit&apos;, &apos;moz&apos;];</span><br><span class="line">        for (var i = 0; i &lt; vendors.length &amp;&amp; !window.requestAnimationFrame; ++i) &#123;</span><br><span class="line">            var vp = vendors[i];</span><br><span class="line">            window.requestAnimationFrame = window[vp+&apos;RequestAnimationFrame&apos;];</span><br><span class="line">            window.cancelAnimationFrame = (window[vp+&apos;CancelAnimationFrame&apos;]</span><br><span class="line">                                    || window[vp+&apos;CancelRequestAnimationFrame&apos;]);</span><br><span class="line">        &#125;</span><br><span class="line">        if (/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent) // iOS6 is buggy</span><br><span class="line">            || !window.requestAnimationFrame || !window.cancelAnimationFrame) &#123;</span><br><span class="line">            var lastTime = 0;</span><br><span class="line">            window.requestAnimationFrame = function(callback) &#123;</span><br><span class="line">                var now = Date.now();</span><br><span class="line">                var nextTime = Math.max(lastTime + 16, now);</span><br><span class="line">                return setTimeout(function() &#123; callback(lastTime = nextTime); &#125;,</span><br><span class="line">                                nextTime - now);</span><br><span class="line">            &#125;;</span><br><span class="line">            window.cancelAnimationFrame = clearTimeout;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;());</span><br><span class="line"></span><br><span class="line">    var getRandomColor = function()&#123;</span><br><span class="line">        return &apos;#&apos;+(Math.random()*0xffffff&lt;&lt;0).toString(16);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var canvas = document.getElementById(&quot;motion&quot;), </span><br><span class="line">        c = canvas.getContext(&quot;2d&quot;),</span><br><span class="line">        particles = &#123;&#125;,</span><br><span class="line">        particleIndex = 0,</span><br><span class="line">        particleNum = 0.2;</span><br><span class="line"></span><br><span class="line">    canvas.width = window.innerWidth;</span><br><span class="line">    canvas.height = window.innerHeight;</span><br><span class="line"></span><br><span class="line">    function Particle()&#123;</span><br><span class="line">        this.x = canvas.width/2;</span><br><span class="line">        this.y = canvas.height/2;</span><br><span class="line"></span><br><span class="line">        this.vx = Math.random() * 6 - 3;</span><br><span class="line">        this.vy = Math.random() * 4 - 2;</span><br><span class="line"></span><br><span class="line">        this.growth = ( Math.abs(this.vx) + Math.abs(this.vy) ) * 0.007;</span><br><span class="line"></span><br><span class="line">        particleIndex++;</span><br><span class="line">        particles[particleIndex] = this;</span><br><span class="line">        this.id = particleIndex;</span><br><span class="line">        this.size = Math.random() * 1;</span><br><span class="line">        this.color = getRandomColor();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Particle.prototype.draw = function()&#123;</span><br><span class="line">        this.x += this.vx;</span><br><span class="line">        this.y += this.vy;</span><br><span class="line"></span><br><span class="line">        this.size += this.growth;</span><br><span class="line">        if(this.x &gt; canvas.width || this.y &gt; canvas.height)&#123;</span><br><span class="line">            delete particles[this.id];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        c.fillStyle = this.color;</span><br><span class="line">        c.beginPath();</span><br><span class="line">        c.arc(this.x, this.y, this.size,0*Math.PI,2*Math.PI);</span><br><span class="line">        c.fill();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    function animate()&#123;</span><br><span class="line">        requestAnimationFrame( animate );        </span><br><span class="line">        c.fillStyle = &quot;#000&quot;;</span><br><span class="line">        c.fillRect(0,0,canvas.width,canvas.height);</span><br><span class="line">        if(Math.random() &gt; particleNum)&#123;</span><br><span class="line">            new Particle();</span><br><span class="line">        &#125;</span><br><span class="line">        for(var i in particles)&#123;</span><br><span class="line">            particles[i].draw();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    requestAnimationFrame( animate );</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/canvas画图的使用总结/" data-id="cjuet870k0001mwt6zatxa9g9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/">canvas</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-thinkphp3-2-react开发上传文件展示信息学习记录" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/" class="article-date">
  <time datetime="2019-03-11T14:03:51.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/">thinkphp3.2 + react开发上传文件展示信息学习记录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、ant插件的使用："><a href="#一、ant插件的使用：" class="headerlink" title="一、ant插件的使用："></a>一、ant插件的使用：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 项目需要引入ant </span><br><span class="line">安装：npm install antd --save</span><br><span class="line">使用：import &#123; 组件名称 &#125; from &apos;antd&apos;（比如import &#123; Switch &#125; from &apos;antd&apos;）</span><br><span class="line">还要引用其样式：import &apos;antd/dist/antd.css&apos;</span><br><span class="line">但是这样直接引用样式会有一些不必要的组件也被引入进来 需要配置webpack进行按需加载</span><br><span class="line">安装babel-plugin-import</span><br><span class="line">npm install babel-plugin-import --save-dev</span><br><span class="line">配置webpack：</span><br><span class="line">&#123; </span><br><span class="line">    test: /\.(js|jsx)$/, </span><br><span class="line">    exclude: /node_modules/, </span><br><span class="line">    loader: &quot;babel-loader&quot;, </span><br><span class="line">    query: &#123;</span><br><span class="line">        presets:[&apos;es2015&apos;,&apos;react&apos;],</span><br><span class="line">        plugins: [</span><br><span class="line">            [&quot;import&quot;, &#123;libraryName: &quot;antd&quot;, style: &quot;css&quot;&#125;] //按需加载</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">放在module rules下面</span><br><span class="line">上述配置完毕直接使用组件： &lt;Switch defaultChecked=&#123;false&#125; /&gt;</span><br><span class="line"></span><br><span class="line">// 个人实际引用经验  因为react与vue的特性区别，react不需要指令也不需要“:”锁定，没一个引入的特性均包括在中括号之下，antd常在插件上使用一些属性，需要&#123;&#125;包裹</span><br></pre></td></tr></table></figure>
<h1 id="二、thinkphp3-2核心功能代码部分："><a href="#二、thinkphp3-2核心功能代码部分：" class="headerlink" title="二、thinkphp3.2核心功能代码部分："></a>二、thinkphp3.2核心功能代码部分：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 上传文件的相关配置，thinkphp使用不是很熟练，切忌单纯的去百度，百度上常放着的问题是大家都会遇到的，简单的是找不到的</span><br><span class="line">        $upload=new \Think\Upload();//实例化上传类</span><br><span class="line">        $upload-&gt;saveName = $count; //设置上传文件名称</span><br><span class="line">        $upload-&gt;autoSub = false; // 上传时不添加时间目录</span><br><span class="line">        $upload-&gt;maxSize = 3145728 ;// info设置附info件上传大小 2M = 1024*1024*2=2097152 3M = 1024*1024*3=3145728</span><br><span class="line">        $upload-&gt;exts = array(&apos;jpg&apos;,&apos;jpeg&apos;,&apos;png&apos;,&apos;gif&apos;);</span><br><span class="line">        $upload-&gt;rootPath =&apos;./public/info/&apos;.$Model.&quot;/&quot;; // 设置附件上传根目录</span><br><span class="line">        $info = $upload-&gt;uploadOne($_FILES[&apos;img&apos;]);</span><br><span class="line">        $return[&apos;img&apos;] = $_FILES[&apos;img&apos;];</span><br><span class="line">        if(!$info)&#123;</span><br><span class="line">            $this-&gt;error($upload-&gt;getError());</span><br><span class="line">        &#125;else&#123;//成功</span><br><span class="line">            $res = M($Model) -&gt; add($data);</span><br><span class="line">            $return[&apos;data&apos;] = $res;</span><br><span class="line">            $this -&gt; ajaxReturn($return); // 以json格式返回给前端数据</span><br><span class="line">        &#125;</span><br><span class="line">// limit，count</span><br><span class="line">    $res = M($Model) -&gt; where($map) -&gt; limit($startNum, $endNum) -&gt; field (&apos;id&apos;,&apos;name&apos;)-&gt; select();</span><br><span class="line">    $res = M($Model) -&gt; count();  // $res一直是个数组 json格式的获取 $res[&apos;name&apos;]</span><br><span class="line">// thinkphp字符串的拼接是靠 &quot;.&quot;</span><br></pre></td></tr></table></figure>
<h1 id="三、React部分"><a href="#三、React部分" class="headerlink" title="三、React部分"></a>三、React部分</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">// 问题1： axios的引入</span><br><span class="line">// 封装http</span><br><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">import qs from &apos;querystring&apos;</span><br><span class="line"></span><br><span class="line">let http = &#123;post: &quot;&quot;, get: &quot;&quot;&#125;</span><br><span class="line"></span><br><span class="line">http.post = function (api, data) &#123;</span><br><span class="line">    let params = qs.stringify(data)</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        axios.post(&apos;http://localhost/Fun/index.php/Home&apos; + api, params).then((res) =&gt; &#123;</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.get = function (api, data) &#123;</span><br><span class="line">    let params = qs.stringify(data)</span><br><span class="line">    return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        axios.get(&apos;http://localhost/Fun/index.php/Home&apos; + api, params).then((res) =&gt; &#123;</span><br><span class="line">            resolve(res)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default http</span><br><span class="line">// axios普通的get\post上传时没有问题的，但是上传文件靠form_data的时候，推荐使用ajax</span><br><span class="line">// 问题2： reducer的使用和总结</span><br><span class="line">// 封装reducer :包括action、reducer  =&gt; 生成store，在每个需要使用store的位置引用即可  react需要注意公用的特性，入口文件加载一次并不会如vue一样，每个页面都包括该内容</span><br><span class="line">// 1、先创建TODOList.js  export 多个值，再解构赋值即可</span><br><span class="line">export const Path = handleActions(&#123;</span><br><span class="line">    &apos;CHANGE_PATH&apos;(state,action) &#123;</span><br><span class="line">        sessionStorage.setItem(&apos;Path&apos;, action.Path); // 使用sessionStorage来保证值存储在各个页面之间</span><br><span class="line">        return action.Path</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,sessionStorage.getItem(&apos;Path&apos;)?sessionStorage.getItem(&apos;Path&apos;):&apos;/login&apos;)</span><br><span class="line">// 2、create Store</span><br><span class="line">import &#123; combineReducers &#125; from &apos;redux&apos;</span><br><span class="line">import * as todoList from &apos;./todoList&apos;</span><br><span class="line">import &#123;createStore&#125; from  &apos;redux&apos;</span><br><span class="line">const rootReducer = combineReducers(&#123;</span><br><span class="line">  ...todoList,</span><br><span class="line">&#125;)</span><br><span class="line">const store = createStore(rootReducer)</span><br><span class="line">export default store</span><br><span class="line">// </span><br><span class="line">// 问题3： 页面跳转及传值</span><br><span class="line">    // 关于这方面的内容，我还没有更清晰的了解。我发现的规律如下：</span><br><span class="line">    // 1、在没有props的情况下，可以使用this.props.history.push(&apos;path&apos;);</span><br><span class="line">    //  不过通常使用window.location.href = &quot;&quot;</span><br><span class="line">// 路由</span><br><span class="line">import React from &apos;react&apos;</span><br><span class="line">import &#123; Router &#125; from &apos;react-router-dom&apos;</span><br><span class="line">import &#123; Route &#125; from &apos;react-router&apos;</span><br><span class="line">import Login from &apos;./../home/pages/Login&apos;</span><br><span class="line">import Container from &apos;./../home/container&apos;</span><br><span class="line">import createBrowserHistory from &apos;history/createBrowserHistory&apos;</span><br><span class="line"></span><br><span class="line">const customHistory = createBrowserHistory()</span><br><span class="line"></span><br><span class="line">const routes = (</span><br><span class="line">  &lt;Router history=&#123;customHistory&#125; &gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route path=&quot;/&quot; exact component=&#123;Login&#125; /&gt;</span><br><span class="line">      &lt;Route path=&quot;/index&quot; component=&#123;Container&#125;/&gt;</span><br><span class="line">      &lt;Route path=&quot;/login&quot; component=&#123;Login&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/Router&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">export default routes;</span><br><span class="line"></span><br><span class="line">// 对应的index.js</span><br><span class="line">import React from &apos;react&apos;;</span><br><span class="line">import ReactDOM from &apos;react-dom&apos;;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &#123; routes &#125;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;)</span><br><span class="line">);</span><br><span class="line">// 路由使用特点：</span><br><span class="line">// 1、路径中共有的内容，可作为共享部分</span><br><span class="line">// 2、 exact 绝对地址  form ... to</span><br><span class="line">// 其他：</span><br><span class="line">// 1、 vue中的数组无length长度等属性，react不确定</span><br><span class="line">// 2、 this.state在使用的过程中，一般在函数见传递打印的均为上一次保留的数据，只有在页面中得到彰显之后才有效</span><br><span class="line">// 3、 加载DOM之前的函数 componentDidMount () &#123;&#125; 通常数据获取从此处进行</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/thinkphp3-2-react开发上传文件展示信息学习记录/" data-id="cjuet870z0008mwt6dslrew4m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkPHP3-2、react、ant插件/">thinkPHP3.2、react、ant插件</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-echarts组件使用总结" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/echarts组件使用总结/" class="article-date">
  <time datetime="2019-03-11T13:58:11.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/echarts组件使用总结/">echarts组件使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>echarts的使用</li>
</ul>
<p>1、步骤：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> echarts <span class="keyword">from</span> <span class="string">'echarts'</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$echarts = echarts;</span><br><span class="line"></span><br><span class="line">初始化echarts对象：   <span class="keyword">var</span> oneEcharts = echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">"oneEcharts"</span>));</span><br><span class="line"></span><br><span class="line">设置option： grid,tooltip,legend,xAixs,yAixs,dataZoom,series,color,barMaxWidth</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> option = &#123;</span><br><span class="line"></span><br><span class="line">    grid:&#123;</span><br><span class="line"></span><br><span class="line">        y:<span class="number">45</span>,</span><br><span class="line"></span><br><span class="line">        y2:<span class="number">70</span>,</span><br><span class="line"></span><br><span class="line">        show:<span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    tooltip : &#123;</span><br><span class="line"></span><br><span class="line">        show: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// trigger: 'item',</span></span><br><span class="line"></span><br><span class="line">        formatter: <span class="function"><span class="keyword">function</span>(<span class="params">data_tooltips</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'&lt;p&gt;通过率&lt;/p&gt;&lt;span&gt;'</span>+ data_tooltips.name + <span class="string">':'</span> + data_tooltips.value +<span class="string">'%&lt;/span&gt;&lt;/br&gt;'</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    legend : &#123;</span><br><span class="line"></span><br><span class="line">        top:<span class="string">"1%"</span>,</span><br><span class="line"></span><br><span class="line">        right:<span class="string">"3%"</span>,</span><br><span class="line"></span><br><span class="line">        data : [<span class="string">'通过率'</span>]</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    xAxis : &#123;</span><br><span class="line"></span><br><span class="line">        data : xtemp,</span><br><span class="line"></span><br><span class="line">        name:<span class="string">'任务'</span>,</span><br><span class="line"></span><br><span class="line">        triggerEvent:<span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">        axisLabel : &#123;</span><br><span class="line"></span><br><span class="line">        interval: <span class="number">0</span>, <span class="comment">//横轴坐标显示全部</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// rotate: -30</span></span><br><span class="line"></span><br><span class="line">            formatter:<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(xtemp.length &gt;= <span class="number">4</span>) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> value.split(<span class="string">""</span>).join(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    yAxis : &#123;</span><br><span class="line"></span><br><span class="line">        name:<span class="string">'%'</span>,</span><br><span class="line"></span><br><span class="line">        min:<span class="number">0</span>,</span><br><span class="line"></span><br><span class="line">        max:<span class="number">100</span></span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    dataZoom: [</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">        id: <span class="string">'dataZoomX'</span>,</span><br><span class="line"></span><br><span class="line">        type: <span class="string">'inside'</span>,</span><br><span class="line"></span><br><span class="line">        xAxisIndex: [<span class="number">0</span>],</span><br><span class="line"></span><br><span class="line">        filterMode: <span class="string">'filter'</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    series : [&#123;</span><br><span class="line"></span><br><span class="line">        name : <span class="string">'通过率'</span>,</span><br><span class="line"></span><br><span class="line">        type : <span class="string">'bar'</span>,</span><br><span class="line"></span><br><span class="line">        data : series,</span><br><span class="line"></span><br><span class="line">        itemStyle:&#123;</span><br><span class="line"></span><br><span class="line">        emphasis:&#123;</span><br><span class="line"></span><br><span class="line">        color:<span class="string">'#FFFC00'</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    barMaxWidth:<span class="string">'20px'</span></span><br><span class="line"></span><br><span class="line">    &#125;],</span><br><span class="line"></span><br><span class="line">    color:[<span class="string">'#007AD0'</span>]</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>绑定option：  oneEcharts.setOption(option);</p>
<p>2、事件：</p>
<p>oneEcharts.on(‘click’,function(params) {})</p>
<p>params的内容包括：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">param.name: X轴的值</span><br><span class="line">param.data: Y轴的值</span><br><span class="line">param.value: Y轴的值</span><br><span class="line">param.type: 点击事件均为click</span><br><span class="line">param.seriesName: legend的名称</span><br><span class="line">param.seriesIndex: 系列序号（series中当前图形是第几个图形第几个）</span><br><span class="line">param.dataIndex: 数值序列（X轴上当前点是第几个点）</span><br></pre></td></tr></table></figure>
<p>取消事件的重复： oneEcharts.off(‘click’);</p>
<p>重置图形：先清除 oneEcharts.clear();</p>
<p>3、echarts x轴文字显示不全(xAxis文字倾斜比较全面的3种做法值得推荐)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//xAxis.axisLabel 属性，grid辅助</span><br><span class="line"></span><br><span class="line">axisLabel: &#123; interval:0, rotate:40&#125;</span><br><span class="line"></span><br><span class="line">grid: &#123;left: &apos;10%&apos;,bottom:&apos;35%&apos;&#125;,</span><br><span class="line"></span><br><span class="line">//   使文字竖直显示 formatter:function(value,index)&#123;&#125; ，value是类目（测试医院A，人民医院）,index 是类目索引。 </span><br><span class="line"></span><br><span class="line">//   利用index使间隔一个换一行</span><br><span class="line"></span><br><span class="line">axisLabel : &#123;</span><br><span class="line"></span><br><span class="line">    interval: 0, //横轴坐标显示全部</span><br><span class="line"></span><br><span class="line">    // rotate: -30</span><br><span class="line"></span><br><span class="line">    formatter:function(value)&#123;</span><br><span class="line"></span><br><span class="line">        if(xtemp.length &gt;= 4) &#123;</span><br><span class="line"></span><br><span class="line">        return value.split(&quot;&quot;).join(&quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">        &#125;else&#123;</span><br><span class="line"></span><br><span class="line">            return value;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/echarts组件使用总结/" data-id="cjuet870s0004mwt61p5qbv1p" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/echarts、常用指令/">echarts、常用指令</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue技术总结4-axios及其代理配置" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/vue技术总结4-axios及其代理配置/" class="article-date">
  <time datetime="2019-03-11T11:02:03.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/vue技术总结4-axios及其代理配置/">vue技术总结4 -- axios及其代理配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一、axios的引用"><a href="#一、axios的引用" class="headerlink" title="一、axios的引用"></a>一、axios的引用</h1><ol>
<li>main.js中</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import axios from &apos;axios&apos;</span><br><span class="line">const base = process.env.API_ROOT //获取当前环境的IP及端口</span><br><span class="line">const instance = axios.create(&#123;</span><br><span class="line">  baseURL:base  //设为axios请求的baseURL</span><br><span class="line">&#125;)</span><br><span class="line">Vue.prototype.$http = instance //定义一个vue的原型对象$http</span><br><span class="line">/*可以按照这个进行一些提交文件的默认设置或者跨域的处理</span><br><span class="line">axios.defaults.headers.post[&apos;Content-Type&apos;] = &apos;application/json&apos;;</span><br><span class="line">axios.defaults.withCredentials=true; //代理配置的一个条件</span><br><span class="line">axios.defaults.headers.common[&apos;X-Requested-With&apos;] = &apos;XMLHttpRequest&apos;;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>组件中引用</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$http.get(<span class="string">"/Login/login"</span>).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;&#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;&#125;);</span><br><span class="line"><span class="keyword">this</span>.$http.post(<span class="string">"/Login/login"</span>).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;&#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="二、axios代理设置"><a href="#二、axios代理设置" class="headerlink" title="二、axios代理设置"></a>二、axios代理设置</h1><p>生产环境等的情况下，跨域使用jsonp等跨域处理；</p>
<p>而代理设置通常针对于开发环境下的一些跨域问题，为了简便，直接配置代理。配置代理后，每次发请求，后台地址就会转发到你自己的本地。</p>
<ol>
<li>在config/index.js的dev里添加</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">proxyTable: &#123;</span><br><span class="line">    &apos;/api&apos;: &#123;</span><br><span class="line">        target: &apos;http://****.***.***.8**:***&apos;, //后台服务器的地址</span><br><span class="line">        changeOrigin: true,  //设置为true</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">            &apos;^/api&apos;:&apos;/&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在src/main.js中</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.withCredentials=<span class="literal">true</span>; <span class="comment">//设置为true</span></span><br><span class="line">Vue.prototype.baseUrl = <span class="string">'/api'</span>; <span class="comment">// "/api"一定要保证对应</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>组件中的使用：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">     baseURL: this.baseUrl,</span><br><span class="line">    url: &apos;/*****&apos;,</span><br><span class="line">    ......</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p>当然也可以在上一步的时候结合instance变量，直接使用。</p>
<ol start="4">
<li>配置了代理如不使用axios，正常情况下ajax可以通过withCredentials与后台配合解决跨域问题</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">url: this.baseUrl+&apos;/***&apos;, //后面加后端接口的地址</span><br><span class="line">xhrFields: &#123;</span><br><span class="line">    withCredentials: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="跨域问题解决办法："><a href="#跨域问题解决办法：" class="headerlink" title="跨域问题解决办法："></a>跨域问题解决办法：</h2><ol>
<li>ajax+jsonp+后台配置</li>
<li>ajax+withCredentials+后台配置</li>
<li>ajax+cors+后台配置</li>
</ol>
<h6 id="情况各不一样，还有待细究；本人常用credentials"><a href="#情况各不一样，还有待细究；本人常用credentials" class="headerlink" title="情况各不一样，还有待细究；本人常用credentials"></a>情况各不一样，还有待细究；本人常用credentials</h6><h6 id="补充cors后台用法，前端在请求位置加上cors-true-false是否异步，后台配置可参考如下："><a href="#补充cors后台用法，前端在请求位置加上cors-true-false是否异步，后台配置可参考如下：" class="headerlink" title="补充cors后台用法，前端在请求位置加上cors:true/false是否异步，后台配置可参考如下："></a>补充cors后台用法，前端在请求位置加上cors:true/false是否异步，后台配置可参考如下：</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public CorsFilter corsFilter() &#123;</span><br><span class="line">        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();</span><br><span class="line">        final CorsConfiguration config = new CorsConfiguration();</span><br><span class="line">        config.setAllowCredentials(true);// 设置是否支持cookie跨域</span><br><span class="line">        //设置白名单，不要填*，不然前端会报错</span><br><span class="line">        config.setAllowedOrigins(Arrays.asList(&quot;http://xxx.xxx.xxx.xxx:xx&quot;,&quot;http://xxx.xxx.xxx.xxx:xx&quot;,&quot;http://xxx.xxx.xxx.xxx:xx&quot;, &quot;http://xxx.xxx.xxx.xxx:xx&quot;));// 支持的原始域</span><br><span class="line">        // http://www.a.com</span><br><span class="line">        config.setAllowedHeaders(Arrays.asList(&quot;*&quot;));// 允许头</span><br><span class="line">        config.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;));// 允许请求方法 GET POST</span><br><span class="line">        config.setMaxAge(300l);// 缓存时间，对同一请求不再进行跨域检查</span><br><span class="line">        source.registerCorsConfiguration(&quot;/**&quot;, config);</span><br><span class="line">        return new CorsFilter(source);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/vue技术总结4-axios及其代理配置/" data-id="cjuet871m000hmwt68uecujls" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue、axios、代理/">vue、axios、代理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vue技术总结3-vuex" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/03/11/vue技术总结3-vuex/" class="article-date">
  <time datetime="2019-03-11T10:32:37.000Z" itemprop="datePublished">2019-03-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/11/vue技术总结3-vuex/">vue技术总结3 -- vuex</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​    vuex是一个专门为vue.js应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<br>​    vuex作为一个状态管理，可以使得全局共享相同的数据，因此常用来保存登录以及用户个人数据。可以解决非父子组件之间的数据传递。</p>
<h1 id="一、vuex的属性"><a href="#一、vuex的属性" class="headerlink" title="一、vuex的属性"></a>一、vuex的属性</h1><p>State、 Getter、Mutation 、Action、 Module</p>
<p>store的属性：state、mutations、action、getters</p>
<h5 id="1-1、state"><a href="#1-1、state" class="headerlink" title="1.1、state"></a>1.1、state</h5><p>​        state为单一状态树，在state中需要定义我们所需要管理的数组、对象、字符串等等，只有在这里定义了，在vue.js的组件中才能获取你定义的这个对象的状态。</p>
<h6 id="特性："><a href="#特性：" class="headerlink" title="特性："></a>特性：</h6><ol>
<li>Vuex就是一个放了很多对象的仓库，而state就相当于数据源存放地。</li>
<li>state里面存放的数据是响应式的，Vue组件从store中读取数据，若是store中的数据发生改变，依赖这个数据的组件也会发生更新</li>
<li>它通过mapState把全局的 state 和 getters 映射到当前组件的 computed 计算属性中；也可以通过this.$store.state.XXX（属性名）直接应用到组件里面；</li>
</ol>
<h5 id="1-2、getter"><a href="#1-2、getter" class="headerlink" title="1.2、getter"></a>1.2、getter</h5><p>​        getter有点类似vue.js的计算属性，当我们需要从store的state中派生出一些状态，那么我们就需要使用getter，getter会接收state作为第一个参数，而且getter的返回值会根据它的依赖被缓存起来，只有getter中的依赖值（state中的某个需要派生状态的值）发生改变的时候才会被重新计算。</p>
<h6 id="特性：-1"><a href="#特性：-1" class="headerlink" title="特性："></a>特性：</h6><ol>
<li>getters 可以对State进行计算操作，它就是Store的计算属性</li>
<li>虽然在组件内也可以做计算属性，但是getters 可以在多组件之间复用</li>
<li>如果一个状态只在一个组件内使用，是可以不用getters</li>
</ol>
<h5 id="1-3、mutation"><a href="#1-3、mutation" class="headerlink" title="1.3、mutation"></a>1.3、mutation</h5><p>​        更改store中state状态的唯一方法就是提交mutation，就很类似事件。每个mutation都有一个字符串类型的事件类型和一个回调函数，我们需要改变state的值就要在回调函数中改变。我们要执行这个回调函数，那么我们需要执行一个相应的调用方法：store.commit。</p>
<h6 id="特性：-2"><a href="#特性：-2" class="headerlink" title="特性："></a>特性：</h6><ol>
<li>对state进行更改，回调函数包含所有判断及操作</li>
</ol>
<h5 id="1-4、action"><a href="#1-4、action" class="headerlink" title="1.4、action"></a>1.4、action</h5><p>​        action可以提交mutation，在action中可以执行store.commit，而且action中可以有任何的异步操作。在页面中如果我们要嗲用这个action，则需要执行store.dispatch</p>
<h6 id="特性：-3"><a href="#特性：-3" class="headerlink" title="特性："></a>特性：</h6><ol>
<li>Action 类似于 mutation，但是Action 提交的是 mutation，而不是直接变更状态。</li>
<li>Action 可以包含任意异步操作</li>
</ol>
<h5 id="1-5、module"><a href="#1-5、module" class="headerlink" title="1.5、module"></a>1.5、module</h5><p>​        module其实只是解决了当state中很复杂臃肿的时候，module可以将store分割成模块，每个模块中拥有自己的state、mutation、action和getter。</p>
<p>参考网址：<a href="https://blog.csdn.net/twinkle_J/article/details/81238093" target="_blank" rel="noopener">https://blog.csdn.net/twinkle_J/article/details/81238093</a></p>
<h1 id="二、使用示例："><a href="#二、使用示例：" class="headerlink" title="二、使用示例："></a>二、使用示例：</h1><ol>
<li>创建一个/store/index.js，文件配置如下（以用户信息做例子）：</li>
</ol>
<p>项目开发中，常将vuex及localStorage一起使用，保证信息的存储，而不会被页面刷新丢失</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">	isLogin: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> base = root.root;<span class="comment">//root.root</span></span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/json'</span>;</span><br><span class="line">Vue.prototype.$axios = axios;</span><br><span class="line">axios.defaults.withCredentials=<span class="literal">true</span>;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">	state: &#123;</span><br><span class="line">		isLogin: <span class="number">0</span>,   <span class="comment">//0表示未登录</span></span><br><span class="line">		token: <span class="string">''</span>,    <span class="comment">//定义一个token变量</span></span><br><span class="line">		role:<span class="number">1</span>,       <span class="comment">//角色</span></span><br><span class="line">		user: <span class="built_in">JSON</span>.stringify(localStorage.user || <span class="string">'&#123;&#125;'</span>), <span class="comment">//user信息存储</span></span><br><span class="line">	&#125;,</span><br><span class="line">	mutations: &#123;</span><br><span class="line">		login (state,data) &#123; </span><br><span class="line">			localStorage.token = data; <span class="comment">//存储登录信息</span></span><br><span class="line">			state.token = data</span><br><span class="line">		&#125;，</span><br><span class="line">        changeUser (state,data)&#123;</span><br><span class="line">			state.user = data;</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;,</span><br><span class="line">	actions: &#123;</span><br><span class="line">		getUser (&#123;commit,paramData&#125;)&#123; <span class="comment">//获取user信息</span></span><br><span class="line">			<span class="keyword">let</span> $router = paramData;</span><br><span class="line">			axios.get(api.info).then(</span><br><span class="line">				res =&gt; &#123;</span><br><span class="line">					<span class="keyword">let</span> data = res.data.data;</span><br><span class="line">					commit(<span class="string">'changeUser'</span>, data.role_id);<span class="comment">//commit mutations里面的changeUser</span></span><br><span class="line">					localStorage.user = <span class="built_in">JSON</span>.stringify(data.role_id || &#123;&#125;);</span><br><span class="line">				&#125;</span><br><span class="line">			).catch(</span><br><span class="line">				err =&gt; &#123;</span><br><span class="line">					commit(<span class="string">'changeUser'</span>,&#123;&#125;);</span><br><span class="line">					<span class="built_in">console</span>.log(router+<span class="string">'------drouter'</span>);</span><br><span class="line">					<span class="keyword">if</span>(router.currentRoute.matched.some(<span class="function"><span class="params">record</span> =&gt;</span> (record.mate.requireAuth)))&#123;</span><br><span class="line">						router.push(&#123;</span><br><span class="line">							path: <span class="string">'/login'</span></span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol>
<li>在src/main.js中import该文件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span> <span class="comment">//根据自己的路径实际更改</span></span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store, <span class="comment">//此处一定要挂载</span></span><br><span class="line">  components: &#123; App &#125;,</span><br><span class="line">  template: <span class="string">'&lt;App/&gt;'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="三、使用vuex与不适用vuex的区别："><a href="#三、使用vuex与不适用vuex的区别：" class="headerlink" title="三、使用vuex与不适用vuex的区别："></a>三、使用vuex与不适用vuex的区别：</h1><p>不用Vuex会带来一下问题：</p>
<ol>
<li><p>可维护性会下降：你要想修改数据，你得维护三个地方</p>
</li>
<li><p>可读性会下降：因为一个组件里的数据，你根本就看不出来是从哪来的</p>
</li>
<li><p>增加耦合：大量的上传<a href="https://www.baidu.com/s?wd=%E6%B4%BE%E5%8F%91&amp;tn=24004469_oem_dg&amp;rsv_dl=gh_pl_sl_csd" target="_blank" rel="noopener">派发</a>，会让耦合性大大的增加。</p>
<p>本来Vue用Component就是为了减少耦合，现在这么用，和组件化的初衷相背。但兄弟组件有大量通信的，建议一定要用，项目大小不论，以为回省下很多操作</p>
</li>
</ol>
<h1 id="四、请求数据代码位置：vuex的actions？组件的methods"><a href="#四、请求数据代码位置：vuex的actions？组件的methods" class="headerlink" title="四、请求数据代码位置：vuex的actions？组件的methods?"></a>四、请求数据代码位置：vuex的actions？组件的methods?</h1><p>一般情况下，我们在开发中，所有的数据请求基本上都写在组件调用的位置。但是当有一些请求数据的接口被复用，且几率很高，这个时候就可以将其置于actions里面，包装秤promise返回，在调用处用async await处理返回的数据。如果不是复用，则直接放在组件的methods里面即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/11/vue技术总结3-vuex/" data-id="cjuet871k000fmwt6s00cjh45" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue、vuex/">vue、vuex</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github-Page博客、hexo、git/">Github Page博客、hexo、git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax请求json、谷歌json跨域/">ajax请求json、谷歌json跨域</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataGrid、easy-ui/">dataGrid、easy-ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts、常用指令/">echarts、常用指令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo博客、转移电脑/">hexo博客、转移电脑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svg、在HTML中画数据库物理模型图/">svg、在HTML中画数据库物理模型图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thinkPHP3-2、react、ant插件/">thinkPHP3.2、react、ant插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、axios、代理/">vue、axios、代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、vueRouter、权限、钩子函数/">vue、vueRouter、权限、钩子函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、vuex/">vue、vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue、页面数据传递、父子组件/">vue、页面数据传递、父子组件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue基础/">vue基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ztree、常用特性/">ztree、常用特性</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Github-Page博客、hexo、git/" style="font-size: 10px;">Github Page博客、hexo、git</a> <a href="/tags/ajax请求json、谷歌json跨域/" style="font-size: 10px;">ajax请求json、谷歌json跨域</a> <a href="/tags/canvas/" style="font-size: 10px;">canvas</a> <a href="/tags/dataGrid、easy-ui/" style="font-size: 10px;">dataGrid、easy-ui</a> <a href="/tags/echarts、常用指令/" style="font-size: 10px;">echarts、常用指令</a> <a href="/tags/hexo博客、转移电脑/" style="font-size: 10px;">hexo博客、转移电脑</a> <a href="/tags/svg、在HTML中画数据库物理模型图/" style="font-size: 10px;">svg、在HTML中画数据库物理模型图</a> <a href="/tags/thinkPHP3-2、react、ant插件/" style="font-size: 10px;">thinkPHP3.2、react、ant插件</a> <a href="/tags/vue、axios、代理/" style="font-size: 10px;">vue、axios、代理</a> <a href="/tags/vue、vueRouter、权限、钩子函数/" style="font-size: 10px;">vue、vueRouter、权限、钩子函数</a> <a href="/tags/vue、vuex/" style="font-size: 10px;">vue、vuex</a> <a href="/tags/vue、页面数据传递、父子组件/" style="font-size: 10px;">vue、页面数据传递、父子组件</a> <a href="/tags/vue基础/" style="font-size: 10px;">vue基础</a> <a href="/tags/ztree、常用特性/" style="font-size: 10px;">ztree、常用特性</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/11/svg画数据库物理模型图/">svg画数据库物理模型图</a>
          </li>
        
          <li>
            <a href="/2019/04/11/ajax请求本地json文件，谷歌浏览器报跨域错误/">ajax请求本地json文件，谷歌浏览器报跨域错误</a>
          </li>
        
          <li>
            <a href="/2019/03/11/vue基本知识/">vue基本知识</a>
          </li>
        
          <li>
            <a href="/2019/03/11/easy-ui之dataGrid/">easy-ui之dataGrid</a>
          </li>
        
          <li>
            <a href="/2019/03/11/ztree树结构总结/">ztree树结构总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>